<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SmartFinance Pro - Personal Finance Tracker</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* ===== ENHANCED VARIABLES & RESET ===== */
        :root {
            --primary-color: #4361ee;
            --primary-light: #4895ef;
            --secondary-color: #3a0ca3;
            --success-color: #4cc9f0;
            --success-light: #4cc9f055;
            --danger-color: #f72585;
            --warning-color: #f8961e;
            --info-color: #7209b7;
            --light-color: #f8f9fa;
            --dark-color: #212529;
            --sidebar-width: 280px;
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --shadow-sm: 0 2px 8px rgba(0,0,0,0.08);
            --shadow-md: 0 4px 16px rgba(0,0,0,0.12);
            --shadow-lg: 0 8px 32px rgba(0,0,0,0.16);
            --radius-sm: 12px;
            --radius-md: 16px;
            --radius-lg: 24px;
        }

        .dark-mode {
            --light-color: #0f172a;
            --dark-color: #e2e8f0;
            --sidebar-bg: #1e293b;
            --card-bg: #1e293b;
            --shadow-sm: 0 2px 8px rgba(0,0,0,0.3);
            --shadow-md: 0 4px 16px rgba(0,0,0,0.4);
            --shadow-lg: 0 8px 32px rgba(0,0,0,0.5);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            transition: var(--transition);
            overflow-x: hidden;
        }

        /* ===== LAYOUT ENHANCEMENTS ===== */
        .container {
            display: flex;
            min-height: 100vh;
            position: relative;
        }

        .sidebar {
            width: var(--sidebar-width);
            background: linear-gradient(180deg, rgba(255,255,255,0.15) 0%, rgba(255,255,255,0.05) 100%);
            backdrop-filter: blur(20px);
            padding: 30px 20px;
            color: white;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
            border-right: 1px solid rgba(255,255,255,0.1);
            z-index: 100;
            transition: var(--transition);
        }

        .sidebar.collapsed {
            width: 80px;
        }

        .sidebar.collapsed .logo span,
        .sidebar.collapsed .nav-links span {
            display: none;
        }

        .main-content {
            flex: 1;
            margin-left: var(--sidebar-width);
            padding: 30px;
            background: var(--light-color);
            color: var(--dark-color);
            min-height: 100vh;
            transition: var(--transition);
        }

        .sidebar.collapsed + .main-content {
            margin-left: 80px;
        }

        /* ===== SIDEBAR ENHANCEMENTS ===== */
        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 40px;
            font-size: 26px;
            font-weight: 800;
            position: relative;
            padding-bottom: 20px;
            border-bottom: 2px solid rgba(255,255,255,0.1);
        }

        .logo i {
            color: var(--success-color);
            font-size: 32px;
            filter: drop-shadow(0 2px 8px rgba(76, 201, 240, 0.3));
        }

        .logo span {
            background: linear-gradient(90deg, #fff, var(--success-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .sidebar-toggle {
            position: absolute;
            right: -12px;
            top: 50%;
            transform: translateY(-50%);
            background: var(--primary-color);
            color: white;
            border: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            box-shadow: var(--shadow-md);
            transition: var(--transition);
        }

        .sidebar-toggle:hover {
            background: var(--secondary-color);
            transform: translateY(-50%) scale(1.1);
        }

        .nav-links {
            list-style: none;
        }

        .nav-links li {
            margin: 12px 0;
        }

        .nav-links a {
            color: rgba(255,255,255,0.9);
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 18px;
            padding: 14px 18px;
            border-radius: var(--radius-sm);
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }

        .nav-links a::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            width: 4px;
            background: var(--success-color);
            transform: translateX(-10px);
            transition: var(--transition);
        }

        .nav-links a:hover::before,
        .nav-links a.active::before {
            transform: translateX(0);
        }

        .nav-links a:hover, .nav-links a.active {
            background: rgba(255, 255, 255, 0.15);
            color: white;
            transform: translateX(8px);
        }

        .nav-links i {
            width: 22px;
            text-align: center;
            font-size: 18px;
        }

        .nav-badge {
            margin-left: auto;
            background: var(--danger-color);
            color: white;
            font-size: 12px;
            padding: 2px 8px;
            border-radius: 20px;
            font-weight: 600;
        }

        /* ===== HEADER ENHANCEMENTS ===== */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 40px;
            padding: 20px;
            background: white;
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-sm);
            position: sticky;
            top: 0;
            z-index: 50;
            transition: var(--transition);
        }

        .dark-mode .header {
            background: var(--card-bg);
        }

        .header h1 {
            color: var(--primary-color);
            font-size: 32px;
            font-weight: 800;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .header h1 i {
            color: var(--success-color);
        }

        .header-controls {
            display: flex;
            gap: 20px;
            align-items: center;
        }

        .search-bar {
            position: relative;
            width: 300px;
        }

        .search-bar input {
            width: 100%;
            padding: 12px 20px 12px 45px;
            border: 2px solid #e2e8f0;
            border-radius: var(--radius-sm);
            font-size: 14px;
            transition: var(--transition);
            background: white;
        }

        .dark-mode .search-bar input {
            background: #2d3748;
            border-color: #4a5568;
            color: white;
        }

        .search-bar input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.15);
        }

        .search-bar i {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: #94a3b8;
        }

        .theme-toggle, .add-btn, .notification-btn {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: var(--radius-sm);
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 600;
            transition: var(--transition);
            box-shadow: var(--shadow-sm);
        }

        .notification-btn {
            position: relative;
            padding: 12px;
        }

        .notification-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: var(--danger-color);
            color: white;
            font-size: 10px;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .theme-toggle:hover, .add-btn:hover, .notification-btn:hover {
            background: var(--secondary-color);
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .user-profile {
            display: flex;
            align-items: center;
            gap: 12px;
            cursor: pointer;
            padding: 8px 12px;
            border-radius: var(--radius-sm);
            transition: var(--transition);
        }

        .user-profile:hover {
            background: rgba(0,0,0,0.05);
        }

        .dark-mode .user-profile:hover {
            background: rgba(255,255,255,0.05);
        }

        .user-avatar {
            width: 42px;
            height: 42px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 18px;
        }

        /* ===== DASHBOARD CARDS ENHANCEMENTS ===== */
        .dashboard-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }

        .card {
            background: white;
            padding: 30px;
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-md);
            transition: var(--transition);
            border-left: 6px solid var(--primary-color);
            position: relative;
            overflow: hidden;
        }

        .dark-mode .card {
            background: var(--card-bg);
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--primary-color), var(--primary-light));
        }

        .card:hover {
            transform: translateY(-8px);
            box-shadow: var(--shadow-lg);
        }

        .card.balance { border-left-color: #4cc9f0; }
        .card.income { border-left-color: #2ecc71; }
        .card.expenses { border-left-color: #f72585; }
        .card.savings { border-left-color: #f8961e; }
        .card.investments { border-left-color: #9d4edd; }
        .card.debt { border-left-color: #ff6d00; }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .card-icon {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 22px;
            box-shadow: var(--shadow-sm);
        }

        .balance .card-icon { background: linear-gradient(135deg, #4cc9f0, #4895ef); }
        .income .card-icon { background: linear-gradient(135deg, #2ecc71, #27ae60); }
        .expenses .card-icon { background: linear-gradient(135deg, #f72585, #b5179e); }
        .savings .card-icon { background: linear-gradient(135deg, #f8961e, #f3722c); }

        .card-value {
            font-size: 40px;
            font-weight: 800;
            margin: 10px 0;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .card-change {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
            font-weight: 600;
        }

        .card-change.positive { color: #2ecc71; }
        .card-change.negative { color: #f72585; }

        /* ===== CHARTS ENHANCEMENTS ===== */
        .charts-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 40px;
        }

        @media (max-width: 1200px) {
            .charts-container {
                grid-template-columns: 1fr;
            }
        }

        .chart-box {
            background: white;
            padding: 30px;
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-md);
            transition: var(--transition);
        }

        .dark-mode .chart-box {
            background: var(--card-bg);
        }

        .chart-box:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }

        .chart-box h3 {
            margin-bottom: 25px;
            color: var(--dark-color);
            font-size: 20px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* ===== TRANSACTIONS ENHANCEMENTS ===== */
        .transactions-section {
            background: white;
            padding: 30px;
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-md);
            transition: var(--transition);
        }

        .dark-mode .transactions-section {
            background: var(--card-bg);
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            flex-wrap: wrap;
            gap: 20px;
        }

        .section-header h2 {
            color: var(--dark-color);
            font-size: 24px;
            font-weight: 700;
        }

        .filters {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 10px 20px;
            border: 2px solid #e2e8f0;
            background: white;
            border-radius: var(--radius-sm);
            cursor: pointer;
            transition: var(--transition);
            font-weight: 600;
            color: #64748b;
        }

        .dark-mode .filter-btn {
            background: #2d3748;
            border-color: #4a5568;
            color: #cbd5e0;
        }

        .filter-btn:hover {
            border-color: var(--primary-color);
            color: var(--primary-color);
        }

        .filter-btn.active {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .export-btn {
            padding: 10px 20px;
            background: var(--success-color);
            color: white;
            border: none;
            border-radius: var(--radius-sm);
            cursor: pointer;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: var(--transition);
        }

        .export-btn:hover {
            background: #3ab8dd;
            transform: translateY(-2px);
        }

        .transactions-list {
            max-height: 500px;
            overflow-y: auto;
            border-radius: var(--radius-sm);
            border: 2px solid #e2e8f0;
            transition: var(--transition);
        }

        .dark-mode .transactions-list {
            border-color: #4a5568;
        }

        .transaction-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 18px;
            border-bottom: 1px solid #e2e8f0;
            transition: var(--transition);
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .dark-mode .transaction-item {
            border-bottom-color: #4a5568;
        }

        .transaction-item:last-child {
            border-bottom: none;
        }

        .transaction-item:hover {
            background: #f8fafc;
            transform: translateX(5px);
        }

        .dark-mode .transaction-item:hover {
            background: #2d3748;
        }

        .transaction-info {
            display: flex;
            align-items: center;
            gap: 18px;
            flex: 1;
        }

        .transaction-icon {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 20px;
            box-shadow: var(--shadow-sm);
            transition: var(--transition);
        }

        .transaction-icon:hover {
            transform: scale(1.1) rotate(10deg);
        }

        .food { background: linear-gradient(135deg, #ff6384, #ff4757); }
        .transport { background: linear-gradient(135deg, #36a2eb, #2e86de); }
        .shopping { background: linear-gradient(135deg, #ffce56, #ff9f43); }
        .bills { background: linear-gradient(135deg, #4bc0c0, #1dd1a1); }
        .entertainment { background: linear-gradient(135deg, #9966ff, #7158e2); }
        .income { background: linear-gradient(135deg, #2ecc71, #27ae60); }
        .health { background: linear-gradient(135deg, #ff6b6b, #ee5a52); }
        .education { background: linear-gradient(135deg, #a29bfe, #6c5ce7); }

        .transaction-details {
            flex: 1;
        }

        .transaction-details h4 {
            margin-bottom: 6px;
            font-size: 16px;
            font-weight: 600;
        }

        .transaction-meta {
            display: flex;
            gap: 15px;
            color: #64748b;
            font-size: 13px;
        }

        .dark-mode .transaction-meta {
            color: #94a3b8;
        }

        .transaction-amount {
            font-weight: 700;
            font-size: 20px;
            margin-right: 20px;
        }

        .income-amount { 
            color: #2ecc71;
            position: relative;
        }

        .income-amount::before {
            content: '+';
            margin-right: 2px;
        }

        .expense-amount { 
            color: #f72585;
            position: relative;
        }

        .expense-amount::before {
            content: '-';
            margin-right: 2px;
        }

        .transaction-actions {
            display: flex;
            gap: 10px;
        }

        .edit-btn, .delete-btn {
            background: none;
            border: none;
            cursor: pointer;
            padding: 8px;
            border-radius: 8px;
            transition: var(--transition);
        }

        .edit-btn {
            color: var(--primary-color);
        }

        .edit-btn:hover {
            background: rgba(67, 97, 238, 0.1);
            transform: scale(1.1);
        }

        .delete-btn {
            color: #ff6b6b;
        }

        .delete-btn:hover {
            background: rgba(255, 107, 107, 0.1);
            transform: scale(1.1);
        }

        /* ===== BUDGETS ENHANCEMENTS ===== */
        .budgets-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
        }

        .budget-item {
            background: white;
            padding: 25px;
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-md);
            transition: var(--transition);
            border: 2px solid transparent;
        }

        .dark-mode .budget-item {
            background: var(--card-bg);
        }

        .budget-item:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
            border-color: var(--primary-light);
        }

        .budget-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .budget-title {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .budget-title h4 {
            font-size: 18px;
            font-weight: 700;
        }

        .budget-amount {
            font-size: 28px;
            font-weight: 800;
            color: var(--primary-color);
        }

        .budget-stats {
            display: flex;
            justify-content: space-between;
            margin: 15px 0;
            font-size: 14px;
            color: #64748b;
        }

        .dark-mode .budget-stats {
            color: #94a3b8;
        }

        .progress-bar {
            height: 12px;
            background: #e2e8f0;
            border-radius: 20px;
            overflow: hidden;
            margin: 20px 0;
            position: relative;
        }

        .dark-mode .progress-bar {
            background: #4a5568;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-color), var(--primary-light));
            border-radius: 20px;
            transition: width 1s cubic-bezier(0.34, 1.56, 0.64, 1);
            position: relative;
            overflow: hidden;
        }

        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            bottom: 0;
            right: 0;
            background: linear-gradient(90deg, 
                transparent 0%, 
                rgba(255,255,255,0.3) 50%, 
                transparent 100%);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .progress-label {
            text-align: center;
            font-size: 14px;
            font-weight: 600;
            margin-top: 10px;
            color: var(--dark-color);
        }

        /* ===== MODAL ENHANCEMENTS ===== */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            backdrop-filter: blur(8px);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            background: white;
            padding: 40px;
            border-radius: var(--radius-lg);
            width: 90%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            animation: slideUp 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            border: 1px solid rgba(255,255,255,0.2);
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        .dark-mode .modal-content {
            background: var(--card-bg);
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(40px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }

        .modal-header h2 {
            color: var(--primary-color);
            font-size: 28px;
            font-weight: 800;
        }

        .close-modal {
            background: none;
            border: none;
            font-size: 28px;
            cursor: pointer;
            color: #64748b;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
        }

        .close-modal:hover {
            background: rgba(0,0,0,0.05);
            color: var(--danger-color);
            transform: rotate(90deg);
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: var(--dark-color);
            font-size: 15px;
        }

        .form-control {
            width: 100%;
            padding: 16px 20px;
            border: 2px solid #e2e8f0;
            border-radius: var(--radius-sm);
            font-size: 15px;
            transition: var(--transition);
            background: white;
        }

        .dark-mode .form-control {
            background: #2d3748;
            border-color: #4a5568;
            color: white;
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 4px rgba(67, 97, 238, 0.2);
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
        }

        .form-buttons {
            display: flex;
            gap: 15px;
            margin-top: 30px;
        }

        .btn-primary, .btn-secondary, .btn-success {
            flex: 1;
            padding: 16px;
            border: none;
            border-radius: var(--radius-sm);
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .btn-primary {
            background: var(--primary-color);
            color: white;
        }

        .btn-primary:hover {
            background: var(--secondary-color);
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: #e2e8f0;
            color: #64748b;
        }

        .btn-secondary:hover {
            background: #cbd5e0;
            transform: translateY(-2px);
        }

        .btn-success {
            background: var(--success-color);
            color: white;
        }

        .btn-success:hover {
            background: #3ab8dd;
            transform: translateY(-2px);
        }

        /* ===== TOAST NOTIFICATIONS ===== */
        .toast-container {
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 10000;
        }

        .toast {
            background: white;
            color: var(--dark-color);
            padding: 18px 24px;
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-lg);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 15px;
            animation: slideInRight 0.3s ease;
            max-width: 400px;
            border-left: 5px solid var(--success-color);
        }

        .dark-mode .toast {
            background: var(--card-bg);
        }

        .toast.error {
            border-left-color: var(--danger-color);
        }

        .toast.warning {
            border-left-color: var(--warning-color);
        }

        .toast.info {
            border-left-color: var(--info-color);
        }

        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(100%);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .toast-icon {
            font-size: 22px;
        }

        .toast-success .toast-icon { color: var(--success-color); }
        .toast-error .toast-icon { color: var(--danger-color); }
        .toast-warning .toast-icon { color: var(--warning-color); }
        .toast-info .toast-icon { color: var(--info-color); }

        .toast-content h4 {
            font-size: 16px;
            font-weight: 700;
            margin-bottom: 4px;
        }

        .toast-content p {
            font-size: 14px;
            color: #64748b;
            margin: 0;
        }

        .close-toast {
            margin-left: auto;
            background: none;
            border: none;
            color: #94a3b8;
            cursor: pointer;
            font-size: 18px;
            padding: 0;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: var(--transition);
        }

        .close-toast:hover {
            background: rgba(0,0,0,0.05);
            color: var(--danger-color);
        }

        /* ===== LOADING SKELETON ===== */
        .skeleton {
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: loading 1.5s infinite;
            border-radius: var(--radius-sm);
        }

        @keyframes loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }

        .skeleton-card {
            height: 150px;
            margin-bottom: 20px;
        }

        .dark-mode .skeleton {
            background: linear-gradient(90deg, #2d3748 25%, #4a5568 50%, #2d3748 75%);
        }

        /* ===== QUICK STATS ===== */
        .quick-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .stat-item {
            background: white;
            padding: 20px;
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-sm);
            display: flex;
            align-items: center;
            gap: 15px;
            transition: var(--transition);
        }

        .dark-mode .stat-item {
            background: var(--card-bg);
        }

        .stat-item:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-md);
        }

        .stat-icon {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 20px;
        }

        .stat-info h4 {
            font-size: 14px;
            color: #64748b;
            margin-bottom: 5px;
        }

        .dark-mode .stat-info h4 {
            color: #94a3b8;
        }

        .stat-info .value {
            font-size: 24px;
            font-weight: 800;
            color: var(--dark-color);
        }

        /* ===== RESPONSIVE ENHANCEMENTS ===== */
        @media (max-width: 1200px) {
            .charts-container {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 992px) {
            .sidebar {
                transform: translateX(-100%);
                width: 300px;
            }
            
            .sidebar.active {
                transform: translateX(0);
            }
            
            .main-content {
                margin-left: 0;
            }
            
            .header-controls {
                flex-wrap: wrap;
            }
            
            .search-bar {
                width: 100%;
                order: 3;
                margin-top: 15px;
            }
        }

        @media (max-width: 768px) {
            .main-content {
                padding: 20px;
            }
            
            .dashboard-cards {
                grid-template-columns: 1fr;
            }
            
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .filters {
                flex-direction: column;
                width: 100%;
            }
            
            .filter-btn {
                width: 100%;
            }
        }

        @media (max-width: 576px) {
            .header {
                flex-direction: column;
                gap: 20px;
                text-align: center;
            }
            
            .header-controls {
                flex-direction: column;
                width: 100%;
            }
            
            .theme-toggle, .add-btn, .notification-btn {
                width: 100%;
                justify-content: center;
            }
            
            .user-profile {
                justify-content: center;
            }
            
            .modal-content {
                padding: 25px;
            }
        }

        /* ===== CUSTOM SCROLLBAR ===== */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(0,0,0,0.05);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--primary-color);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--secondary-color);
        }

        /* ===== ANIMATIONS ===== */
        .pulse {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(67, 97, 238, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(67, 97, 238, 0); }
            100% { box-shadow: 0 0 0 0 rgba(67, 97, 238, 0); }
        }

        .float {
            animation: float 6s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        /* ===== UTILITY CLASSES ===== */
        .text-success { color: #2ecc71; }
        .text-danger { color: #f72585; }
        .text-warning { color: #f8961e; }
        .text-info { color: #4cc9f0; }
        .text-muted { color: #64748b; }
        .dark-mode .text-muted { color: #94a3b8; }

        .bg-success { background: rgba(46, 204, 113, 0.1); }
        .bg-danger { background: rgba(247, 37, 133, 0.1); }
        .bg-warning { background: rgba(248, 150, 30, 0.1); }
        .bg-info { background: rgba(76, 201, 240, 0.1); }

        .mb-0 { margin-bottom: 0; }
        .mb-1 { margin-bottom: 0.25rem; }
        .mb-2 { margin-bottom: 0.5rem; }
        .mb-3 { margin-bottom: 1rem; }
        .mb-4 { margin-bottom: 1.5rem; }
        .mb-5 { margin-bottom: 3rem; }

        .mt-0 { margin-top: 0; }
        .mt-1 { margin-top: 0.25rem; }
        .mt-2 { margin-top: 0.5rem; }
        .mt-3 { margin-top: 1rem; }
        .mt-4 { margin-top: 1.5rem; }
        .mt-5 { margin-top: 3rem; }

        .text-center { text-align: center; }
        .text-right { text-align: right; }
        .text-left { text-align: left; }

        .d-flex { display: flex; }
        .d-block { display: block; }
        .d-none { display: none; }
        .align-center { align-items: center; }
        .justify-between { justify-content: space-between; }
        .gap-1 { gap: 0.25rem; }
        .gap-2 { gap: 0.5rem; }
        .gap-3 { gap: 1rem; }
        .gap-4 { gap: 1.5rem; }
        .gap-5 { gap: 3rem; }

        .w-100 { width: 100%; }
        .h-100 { height: 100%; }

        .rounded { border-radius: var(--radius-sm); }
        .rounded-md { border-radius: var(--radius-md); }
        .rounded-lg { border-radius: var(--radius-lg); }

        .shadow-sm { box-shadow: var(--shadow-sm); }
        .shadow-md { box-shadow: var(--shadow-md); }
        .shadow-lg { box-shadow: var(--shadow-lg); }

        .cursor-pointer { cursor: pointer; }

        .transition { transition: var(--transition); }

        /* ===== PIE CHART LEGEND ===== */
        .chart-legend {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 20px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
        }

        .legend-color {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }

        /* ===== GOALS SECTION ENHANCEMENTS ===== */
        .goals-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 25px;
        }

        .goal-card {
            background: white;
            padding: 30px;
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-md);
            transition: var(--transition);
            border: 2px solid transparent;
            position: relative;
            overflow: hidden;
        }

        .dark-mode .goal-card {
            background: var(--card-bg);
        }

        .goal-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
            border-color: var(--primary-light);
        }

        .goal-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--primary-color), var(--success-color));
        }

        .goal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .goal-title {
            font-size: 20px;
            font-weight: 700;
            color: var(--dark-color);
        }

        .goal-progress-circle {
            position: relative;
            width: 80px;
            height: 80px;
        }

        .goal-progress-circle svg {
            transform: rotate(-90deg);
        }

        .goal-progress-circle .circle-bg {
            fill: none;
            stroke: #e2e8f0;
            stroke-width: 8;
        }

        .dark-mode .goal-progress-circle .circle-bg {
            stroke: #4a5568;
        }

        .goal-progress-circle .circle {
            fill: none;
            stroke: var(--success-color);
            stroke-width: 8;
            stroke-linecap: round;
            transition: stroke-dashoffset 1s ease;
        }

        .goal-progress-percent {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 24px;
            font-weight: 800;
            color: var(--success-color);
        }

        .goal-details {
            margin-top: 25px;
        }

        .goal-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }

        .goal-stat {
            text-align: center;
            padding: 15px;
            background: rgba(67, 97, 238, 0.05);
            border-radius: var(--radius-sm);
            transition: var(--transition);
        }

        .dark-mode .goal-stat {
            background: rgba(255, 255, 255, 0.05);
        }

        .goal-stat:hover {
            transform: translateY(-3px);
            background: rgba(67, 97, 238, 0.1);
        }

        .goal-stat .label {
            font-size: 12px;
            color: #64748b;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 5px;
        }

        .dark-mode .goal-stat .label {
            color: #94a3b8;
        }

        .goal-stat .value {
            font-size: 20px;
            font-weight: 800;
            color: var(--dark-color);
        }

        .goal-actions {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .goal-actions input {
            flex: 1;
            padding: 12px;
            border: 2px solid #e2e8f0;
            border-radius: var(--radius-sm);
            font-size: 14px;
        }

        .dark-mode .goal-actions input {
            background: #2d3748;
            border-color: #4a5568;
            color: white;
        }

        .goal-actions button {
            padding: 12px 24px;
            background: var(--success-color);
            color: white;
            border: none;
            border-radius: var(--radius-sm);
            cursor: pointer;
            font-weight: 600;
            transition: var(--transition);
        }

        .goal-actions button:hover {
            background: #3ab8dd;
            transform: translateY(-2px);
        }

        /* ===== REPORTS SECTION ENHANCEMENTS ===== */
        .reports-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
        }

        .report-card {
            background: white;
            padding: 30px;
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-md);
            transition: var(--transition);
        }

        .dark-mode .report-card {
            background: var(--card-bg);
        }

        .report-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }

        .report-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 25px;
        }

        .report-icon {
            width: 60px;
            height: 60px;
            border-radius: 15px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
        }

        .report-title {
            font-size: 22px;
            font-weight: 700;
            color: var(--dark-color);
        }

        .report-content {
            margin-top: 25px;
        }

        .report-metric {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid #e2e8f0;
        }

        .dark-mode .report-metric {
            border-bottom-color: #4a5568;
        }

        .report-metric:last-child {
            border-bottom: none;
        }

        .report-metric .label {
            font-size: 16px;
            color: #64748b;
        }

        .dark-mode .report-metric .label {
            color: #94a3b8;
        }

        .report-metric .value {
            font-size: 20px;
            font-weight: 800;
            color: var(--dark-color);
        }

        .report-chart {
            height: 200px;
            margin-top: 25px;
        }

        /* ===== INSIGHTS SECTION ===== */
        .insights-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-top: 40px;
        }

        .insight-card {
            background: white;
            padding: 30px;
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-md);
            transition: var(--transition);
        }

        .dark-mode .insight-card {
            background: var(--card-bg);
        }

        .insight-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }

        .insight-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .insight-icon {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            background: linear-gradient(135deg, var(--success-color), #4895ef);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 22px;
        }

        .insight-title {
            font-size: 18px;
            font-weight: 700;
            color: var(--dark-color);
        }

        .insight-content {
            font-size: 15px;
            line-height: 1.6;
            color: #64748b;
        }

        .dark-mode .insight-content {
            color: #94a3b8;
        }

        .insight-tip {
            margin-top: 20px;
            padding: 15px;
            background: rgba(76, 201, 240, 0.1);
            border-radius: var(--radius-sm);
            border-left: 4px solid var(--success-color);
        }

        .dark-mode .insight-tip {
            background: rgba(76, 201, 240, 0.2);
        }

        /* ===== RECURRING TRANSACTIONS ===== */
        .recurring-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            background: white;
            border-radius: var(--radius-sm);
            margin-bottom: 15px;
            box-shadow: var(--shadow-sm);
            transition: var(--transition);
        }

        .dark-mode .recurring-item {
            background: var(--card-bg);
        }

        .recurring-item:hover {
            transform: translateX(5px);
            box-shadow: var(--shadow-md);
        }

        .recurring-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .recurring-icon {
            width: 45px;
            height: 45px;
            border-radius: 12px;
            background: linear-gradient(135deg, #f72585, #b5179e);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 18px;
        }

        .recurring-details h4 {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .recurring-details p {
            font-size: 14px;
            color: #64748b;
            margin: 0;
        }

        .dark-mode .recurring-details p {
            color: #94a3b8;
        }

        .recurring-actions {
            display: flex;
            gap: 10px;
        }

        /* ===== MOBILE MENU TOGGLE ===== */
        .mobile-menu-toggle {
            display: none;
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1000;
            background: var(--primary-color);
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: none;
            font-size: 20px;
            cursor: pointer;
            box-shadow: var(--shadow-lg);
            transition: var(--transition);
        }

        @media (max-width: 992px) {
            .mobile-menu-toggle {
                display: flex;
                align-items: center;
                justify-content: center;
            }
        }

        .mobile-menu-toggle:hover {
            background: var(--secondary-color);
            transform: scale(1.1);
        }

        /* ===== WELCOME TOUR ===== */
        .tour-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 9999;
            backdrop-filter: blur(5px);
        }

        .tour-step {
            position: absolute;
            background: white;
            padding: 30px;
            border-radius: var(--radius-lg);
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            max-width: 400px;
            z-index: 10000;
            animation: fadeIn 0.3s ease;
        }

        .dark-mode .tour-step {
            background: var(--card-bg);
        }

        .tour-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .tour-title {
            font-size: 20px;
            font-weight: 700;
            color: var(--primary-color);
        }

        .tour-content {
            font-size: 16px;
            line-height: 1.6;
            color: #64748b;
            margin-bottom: 25px;
        }

        .dark-mode .tour-content {
            color: #94a3b8;
        }

        .tour-actions {
            display: flex;
            justify-content: space-between;
            gap: 15px;
        }

        .tour-prev, .tour-next, .tour-skip {
            padding: 12px 24px;
            border-radius: var(--radius-sm);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
        }

        .tour-prev {
            background: #e2e8f0;
            color: #64748b;
            border: none;
        }

        .tour-prev:hover {
            background: #cbd5e0;
        }

        .tour-next {
            background: var(--primary-color);
            color: white;
            border: none;
        }

        .tour-next:hover {
            background: var(--secondary-color);
        }

        .tour-skip {
            background: transparent;
            color: #64748b;
            border: none;
        }

        .tour-skip:hover {
            color: var(--danger-color);
        }

        /* ===== STATISTICS CARDS ===== */
        .stats-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .stat-card {
            background: white;
            padding: 25px;
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-md);
            transition: var(--transition);
        }

        .dark-mode .stat-card {
            background: var(--card-bg);
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }

        .stat-card-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }

        .stat-card-icon {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 22px;
        }

        .stat-card-title {
            font-size: 16px;
            font-weight: 600;
            color: var(--dark-color);
        }

        .stat-card-value {
            font-size: 32px;
            font-weight: 800;
            color: var(--primary-color);
            margin-bottom: 10px;
        }

        .stat-card-change {
            font-size: 14px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .stat-card-change.positive {
            color: #2ecc71;
        }

        .stat-card-change.negative {
            color: #f72585;
        }

        /* ===== DATA VISUALIZATION ENHANCEMENTS ===== */
        .viz-container {
            background: white;
            padding: 30px;
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-md);
            margin-bottom: 40px;
        }

        .dark-mode .viz-container {
            background: var(--card-bg);
        }

        .viz-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }

        .viz-title {
            font-size: 20px;
            font-weight: 700;
            color: var(--dark-color);
        }

        .viz-controls {
            display: flex;
            gap: 10px;
        }

        .viz-control {
            padding: 8px 16px;
            background: #e2e8f0;
            border: none;
            border-radius: var(--radius-sm);
            font-size: 14px;
            font-weight: 600;
            color: #64748b;
            cursor: pointer;
            transition: var(--transition);
        }

        .dark-mode .viz-control {
            background: #4a5568;
            color: #cbd5e0;
        }

        .viz-control:hover {
            background: var(--primary-color);
            color: white;
        }

        .viz-control.active {
            background: var(--primary-color);
            color: white;
        }

        .viz-content {
            height: 300px;
            position: relative;
        }

        /* ===== KEYBOARD SHORTCUTS ===== */
        .shortcuts-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 10000;
            justify-content: center;
            align-items: center;
        }

        .shortcuts-content {
            background: white;
            padding: 40px;
            border-radius: var(--radius-lg);
            max-width: 800px;
            max-height: 80vh;
            overflow-y: auto;
        }

        .dark-mode .shortcuts-content {
            background: var(--card-bg);
        }

        .shortcuts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .shortcut-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            background: #f8fafc;
            border-radius: var(--radius-sm);
            transition: var(--transition);
        }

        .dark-mode .shortcut-item {
            background: rgba(255,255,255,0.05);
        }

        .shortcut-key {
            background: var(--primary-color);
            color: white;
            padding: 8px 16px;
            border-radius: var(--radius-sm);
            font-weight: 600;
            min-width: 80px;
            text-align: center;
        }

        .shortcut-description {
            font-size: 14px;
            color: #64748b;
        }

        .dark-mode .shortcut-description {
            color: #94a3b8;
        }

        /* ===== RECENT ACTIVITY ===== */
        .activity-timeline {
            position: relative;
            padding-left: 30px;
        }

        .activity-timeline::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 2px;
            background: var(--primary-color);
        }

        .activity-item {
            position: relative;
            padding: 20px 0 20px 30px;
            border-bottom: 1px solid #e2e8f0;
        }

        .dark-mode .activity-item {
            border-bottom-color: #4a5568;
        }

        .activity-item:last-child {
            border-bottom: none;
        }

        .activity-item::before {
            content: '';
            position: absolute;
            left: -6px;
            top: 25px;
            width: 14px;
            height: 14px;
            border-radius: 50%;
            background: var(--primary-color);
            border: 3px solid white;
        }

        .dark-mode .activity-item::before {
            border-color: var(--card-bg);
        }

        .activity-icon {
            position: absolute;
            left: -40px;
            top: 20px;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background: var(--success-color);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
        }

        .activity-content h4 {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .activity-content p {
            font-size: 14px;
            color: #64748b;
            margin: 0;
        }

        .dark-mode .activity-content p {
            color: #94a3b8;
        }

        .activity-time {
            font-size: 12px;
            color: #94a3b8;
            margin-top: 5px;
        }

        /* ===== QUICK ACTIONS ===== */
        .quick-actions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .action-button {
            background: white;
            padding: 25px;
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-md);
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
            border: 2px solid transparent;
        }

        .dark-mode .action-button {
            background: var(--card-bg);
        }

        .action-button:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
            border-color: var(--primary-color);
        }

        .action-icon {
            width: 60px;
            height: 60px;
            margin: 0 auto 15px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
            transition: var(--transition);
        }

        .action-button:hover .action-icon {
            transform: scale(1.1) rotate(10deg);
        }

        .action-title {
            font-size: 16px;
            font-weight: 600;
            color: var(--dark-color);
        }

        /* ===== PERFORMANCE METRICS ===== */
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .metric-card {
            background: white;
            padding: 25px;
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-md);
            text-align: center;
            transition: var(--transition);
        }

        .dark-mode .metric-card {
            background: var(--card-bg);
        }

        .metric-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }

        .metric-value {
            font-size: 40px;
            font-weight: 800;
            color: var(--primary-color);
            margin-bottom: 10px;
        }

        .metric-label {
            font-size: 14px;
            color: #64748b;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .dark-mode .metric-label {
            color: #94a3b8;
        }

        .metric-trend {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
            margin-top: 10px;
            font-size: 14px;
            font-weight: 600;
        }

        .metric-trend.positive {
            color: #2ecc71;
        }

        .metric-trend.negative {
            color: #f72585;
        }

        /* ===== ACHIEVEMENTS BADGES ===== */
        .achievements-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .achievement-badge {
            background: white;
            padding: 25px 15px;
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-md);
            text-align: center;
            transition: var(--transition);
            position: relative;
        }

        .dark-mode .achievement-badge {
            background: var(--card-bg);
        }

        .achievement-badge:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: var(--shadow-lg);
        }

        .achievement-badge.locked {
            opacity: 0.5;
            filter: grayscale(1);
        }

        .badge-icon {
            width: 60px;
            height: 60px;
            margin: 0 auto 15px;
            border-radius: 50%;
            background: linear-gradient(135deg, #f72585, #7209b7);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
        }

        .achievement-badge.locked .badge-icon {
            background: linear-gradient(135deg, #64748b, #475569);
        }

        .badge-title {
            font-size: 14px;
            font-weight: 600;
            color: var(--dark-color);
            margin-bottom: 5px;
        }

        .badge-description {
            font-size: 12px;
            color: #64748b;
        }

        .dark-mode .badge-description {
            color: #94a3b8;
        }

        .badge-progress {
            position: absolute;
            top: 10px;
            right: 10px;
            background: var(--success-color);
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: 600;
        }

        /* ===== NOTIFICATIONS PANEL ===== */
        .notifications-panel {
            position: fixed;
            top: 80px;
            right: 30px;
            width: 400px;
            max-width: 90vw;
            background: white;
            border-radius: var(--radius-lg);
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            z-index: 999;
            display: none;
            animation: slideInRight 0.3s ease;
        }

        .dark-mode .notifications-panel {
            background: var(--card-bg);
        }

        .notifications-header {
            padding: 25px;
            border-bottom: 1px solid #e2e8f0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .dark-mode .notifications-header {
            border-bottom-color: #4a5568;
        }

        .notifications-header h3 {
            font-size: 20px;
            font-weight: 700;
            color: var(--dark-color);
        }

        .notifications-content {
            max-height: 400px;
            overflow-y: auto;
        }

        .notification-item {
            padding: 20px;
            border-bottom: 1px solid #e2e8f0;
            display: flex;
            gap: 15px;
            transition: var(--transition);
        }

        .dark-mode .notification-item {
            border-bottom-color: #4a5568;
        }

        .notification-item:hover {
            background: #f8fafc;
        }

        .dark-mode .notification-item:hover {
            background: rgba(255,255,255,0.05);
        }

        .notification-item.unread {
            background: rgba(67, 97, 238, 0.05);
        }

        .dark-mode .notification-item.unread {
            background: rgba(67, 97, 238, 0.2);
        }

        .notification-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 16px;
            flex-shrink: 0;
        }

        .notification-content h4 {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .notification-content p {
            font-size: 13px;
            color: #64748b;
            margin: 0;
        }

        .dark-mode .notification-content p {
            color: #94a3b8;
        }

        .notification-time {
            font-size: 12px;
            color: #94a3b8;
            margin-top: 5px;
        }

        /* ===== IMPORT/EXPORT SECTION ===== */
        .import-export {
            background: white;
            padding: 40px;
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-lg);
            margin-bottom: 40px;
        }

        .dark-mode .import-export {
            background: var(--card-bg);
        }

        .import-export-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .import-export-header h2 {
            font-size: 28px;
            font-weight: 800;
            color: var(--primary-color);
            margin-bottom: 10px;
        }

        .import-export-header p {
            font-size: 16px;
            color: #64748b;
            max-width: 600px;
            margin: 0 auto;
        }

        .dark-mode .import-export-header p {
            color: #94a3b8;
        }

        .import-export-actions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
        }

        .import-export-card {
            background: #f8fafc;
            padding: 30px;
            border-radius: var(--radius-md);
            text-align: center;
            transition: var(--transition);
            border: 2px dashed #cbd5e0;
        }

        .dark-mode .import-export-card {
            background: rgba(255,255,255,0.05);
            border-color: #4a5568;
        }

        .import-export-card:hover {
            border-color: var(--primary-color);
            transform: translateY(-5px);
        }

        .import-export-icon {
            width: 80px;
            height: 80px;
            margin: 0 auto 20px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--success-color), #4895ef);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 32px;
        }

        .import-export-title {
            font-size: 20px;
            font-weight: 700;
            color: var(--dark-color);
            margin-bottom: 15px;
        }

        .import-export-description {
            font-size: 14px;
            color: #64748b;
            margin-bottom: 25px;
            line-height: 1.6;
        }

        .dark-mode .import-export-description {
            color: #94a3b8;
        }

        .import-export-button {
            display: inline-block;
            padding: 12px 30px;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: var(--radius-sm);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
        }

        .import-export-button:hover {
            background: var(--secondary-color);
            transform: translateY(-2px);
        }

        .file-input {
            display: none;
        }

        /* ===== SETTINGS SECTION ===== */
        .settings-container {
            background: white;
            padding: 40px;
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-lg);
        }

        .dark-mode .settings-container {
            background: var(--card-bg);
        }

        .settings-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 40px;
            border-bottom: 2px solid #e2e8f0;
            padding-bottom: 10px;
        }

        .dark-mode .settings-tabs {
            border-bottom-color: #4a5568;
        }

        .settings-tab {
            padding: 12px 24px;
            background: transparent;
            border: none;
            border-radius: var(--radius-sm);
            font-weight: 600;
            color: #64748b;
            cursor: pointer;
            transition: var(--transition);
        }

        .dark-mode .settings-tab {
            color: #94a3b8;
        }

        .settings-tab:hover {
            color: var(--primary-color);
        }

        .settings-tab.active {
            background: var(--primary-color);
            color: white;
        }

        .settings-section {
            margin-bottom: 40px;
        }

        .settings-section h3 {
            font-size: 20px;
            font-weight: 700;
            color: var(--dark-color);
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid #e2e8f0;
        }

        .dark-mode .settings-section h3 {
            border-bottom-color: #4a5568;
        }

        .settings-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
        }

        .setting-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            background: #f8fafc;
            border-radius: var(--radius-md);
            transition: var(--transition);
        }

        .dark-mode .setting-item {
            background: rgba(255,255,255,0.05);
        }

        .setting-item:hover {
            transform: translateX(5px);
            background: rgba(67, 97, 238, 0.05);
        }

        .setting-info h4 {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .setting-info p {
            font-size: 14px;
            color: #64748b;
            margin: 0;
        }

        .dark-mode .setting-info p {
            color: #94a3b8;
        }

        .toggle-switch {
            position: relative;
            width: 60px;
            height: 30px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 34px;
        }

        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 22px;
            width: 22px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .toggle-slider {
            background-color: var(--primary-color);
        }

        input:checked + .toggle-slider:before {
            transform: translateX(30px);
        }

        /* ===== CHATBOT ASSISTANT ===== */
        .chatbot-toggle {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            border: none;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 10px 30px rgba(67, 97, 238, 0.3);
            z-index: 999;
            transition: var(--transition);
        }

        .chatbot-toggle:hover {
            transform: scale(1.1) rotate(15deg);
            box-shadow: 0 15px 40px rgba(67, 97, 238, 0.4);
        }

        .chatbot-container {
            position: fixed;
            bottom: 100px;
            right: 30px;
            width: 350px;
            max-width: 90vw;
            background: white;
            border-radius: var(--radius-lg);
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            z-index: 999;
            display: none;
            animation: slideInUp 0.3s ease;
        }

        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(40px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .dark-mode .chatbot-container {
            background: var(--card-bg);
        }

        .chatbot-header {
            padding: 20px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            border-radius: var(--radius-lg) var(--radius-lg) 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chatbot-header h3 {
            font-size: 18px;
            font-weight: 700;
        }

        .close-chatbot {
            background: none;
            border: none;
            color: white;
            font-size: 20px;
            cursor: pointer;
            padding: 5px;
        }

        .chatbot-messages {
            height: 300px;
            overflow-y: auto;
            padding: 20px;
        }

        .message {
            margin-bottom: 15px;
            max-width: 80%;
        }

        .message.user {
            margin-left: auto;
        }

        .message-content {
            padding: 12px 16px;
            border-radius: 20px;
            font-size: 14px;
            line-height: 1.4;
        }

        .message.bot .message-content {
            background: #f1f5f9;
            color: var(--dark-color);
        }

        .dark-mode .message.bot .message-content {
            background: #4a5568;
        }

        .message.user .message-content {
            background: var(--primary-color);
            color: white;
        }

        .chatbot-input {
            padding: 20px;
            border-top: 1px solid #e2e8f0;
        }

        .dark-mode .chatbot-input {
            border-top-color: #4a5568;
        }

        .chatbot-input form {
            display: flex;
            gap: 10px;
        }

        .chatbot-input input {
            flex: 1;
            padding: 12px;
            border: 2px solid #e2e8f0;
            border-radius: var(--radius-sm);
            font-size: 14px;
        }

        .dark-mode .chatbot-input input {
            background: #2d3748;
            border-color: #4a5568;
            color: white;
        }

        .chatbot-input button {
            background: var(--primary-color);
            color: white;
            border: none;
            width: 40px;
            border-radius: var(--radius-sm);
            cursor: pointer;
            font-size: 18px;
        }

        /* ===== HELP & SUPPORT ===== */
        .help-container {
            background: white;
            padding: 40px;
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-lg);
        }

        .dark-mode .help-container {
            background: var(--card-bg);
        }

        .help-search {
            position: relative;
            margin-bottom: 40px;
        }

        .help-search input {
            width: 100%;
            padding: 16px 20px 16px 50px;
            border: 2px solid #e2e8f0;
            border-radius: var(--radius-md);
            font-size: 16px;
            transition: var(--transition);
        }

        .dark-mode .help-search input {
            background: #2d3748;
            border-color: #4a5568;
            color: white;
        }

        .help-search input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 4px rgba(67, 97, 238, 0.2);
        }

        .help-search i {
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            color: #94a3b8;
            font-size: 18px;
        }

        .help-categories {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }

        .help-category {
            background: #f8fafc;
            padding: 30px;
            border-radius: var(--radius-md);
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
        }

        .dark-mode .help-category {
            background: rgba(255,255,255,0.05);
        }

        .help-category:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
            background: rgba(67, 97, 238, 0.05);
        }

        .help-category-icon {
            width: 70px;
            height: 70px;
            margin: 0 auto 20px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 28px;
        }

        .help-category h3 {
            font-size: 18px;
            font-weight: 700;
            color: var(--dark-color);
            margin-bottom: 10px;
        }

        .help-category p {
            font-size: 14px;
            color: #64748b;
            line-height: 1.6;
        }

        .dark-mode .help-category p {
            color: #94a3b8;
        }

        .faq-section h3 {
            font-size: 24px;
            font-weight: 700;
            color: var(--dark-color);
            margin-bottom: 30px;
            text-align: center;
        }

        .faq-item {
            margin-bottom: 15px;
            border: 2px solid #e2e8f0;
            border-radius: var(--radius-md);
            overflow: hidden;
            transition: var(--transition);
        }

        .dark-mode .faq-item {
            border-color: #4a5568;
        }

        .faq-question {
            padding: 20px;
            background: #f8fafc;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            font-weight: 600;
        }

        .dark-mode .faq-question {
            background: rgba(255,255,255,0.05);
        }

        .faq-answer {
            padding: 0 20px;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease, padding 0.3s ease;
        }

        .faq-item.active .faq-answer {
            padding: 20px;
            max-height: 1000px;
        }

        .faq-toggle {
            font-size: 20px;
            color: var(--primary-color);
            transition: transform 0.3s ease;
        }

        .faq-item.active .faq-toggle {
            transform: rotate(45deg);
        }

        /* ===== ONBOARDING TOUR ===== */
        .tour-container {
            display: none;
        }

        /* ===== ACHIEVEMENTS POPUP ===== */
        .achievement-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 40px;
            border-radius: var(--radius-lg);
            box-shadow: 0 30px 80px rgba(0,0,0,0.4);
            z-index: 10000;
            display: none;
            animation: popIn 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
            text-align: center;
            max-width: 400px;
            width: 90%;
        }

        @keyframes popIn {
            0% {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0.5);
            }
            100% {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1);
            }
        }

        .dark-mode .achievement-popup {
            background: var(--card-bg);
        }

        .achievement-popup-icon {
            width: 100px;
            height: 100px;
            margin: 0 auto 20px;
            border-radius: 50%;
            background: linear-gradient(135deg, #f72585, #7209b7);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 40px;
            animation: float 3s ease-in-out infinite;
        }

        .achievement-popup h3 {
            font-size: 24px;
            font-weight: 800;
            color: var(--dark-color);
            margin-bottom: 10px;
        }

        .achievement-popup p {
            font-size: 16px;
            color: #64748b;
            margin-bottom: 25px;
            line-height: 1.6;
        }

        .dark-mode .achievement-popup p {
            color: #94a3b8;
        }

        .achievement-popup button {
            padding: 12px 30px;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: var(--radius-sm);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
        }

        .achievement-popup button:hover {
            background: var(--secondary-color);
            transform: translateY(-2px);
        }

        /* ===== DATA VISUALIZATION EFFECTS ===== */
        .sparkline {
            width: 100px;
            height: 30px;
            position: relative;
        }

        .sparkline-line {
            fill: none;
            stroke: var(--primary-color);
            stroke-width: 2;
        }

        .sparkline-area {
            fill: rgba(67, 97, 238, 0.1);
        }

        /* ===== TRANSACTION TAGS ===== */
        .transaction-tags {
            display: flex;
            gap: 5px;
            margin-top: 8px;
            flex-wrap: wrap;
        }

        .transaction-tag {
            padding: 4px 10px;
            background: rgba(67, 97, 238, 0.1);
            color: var(--primary-color);
            border-radius: 20px;
            font-size: 11px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .transaction-tag.recurring {
            background: rgba(247, 37, 133, 0.1);
            color: #f72585;
        }

        .transaction-tag.essential {
            background: rgba(46, 204, 113, 0.1);
            color: #2ecc71;
        }

        .transaction-tag.luxury {
            background: rgba(248, 150, 30, 0.1);
            color: #f8961e;
        }

        /* ===== COLOR PICKER ===== */
        .color-picker {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }

        .color-option {
            width: 30px;
            height: 30px;
            border-radius: 6px;
            cursor: pointer;
            border: 3px solid transparent;
            transition: var(--transition);
        }

        .color-option:hover {
            transform: scale(1.1);
        }

        .color-option.selected {
            border-color: var(--dark-color);
            box-shadow: 0 0 0 2px white;
        }

        .dark-mode .color-option.selected {
            border-color: white;
            box-shadow: 0 0 0 2px var(--dark-color);
        }

        /* ===== DATE RANGE PICKER ===== */
        .date-range-picker {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .date-range-picker input {
            padding: 10px;
            border: 2px solid #e2e8f0;
            border-radius: var(--radius-sm);
            font-size: 14px;
        }

        .dark-mode .date-range-picker input {
            background: #2d3748;
            border-color: #4a5568;
            color: white;
        }

        .date-range-picker button {
            padding: 10px 20px;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: var(--radius-sm);
            cursor: pointer;
            font-weight: 600;
            transition: var(--transition);
        }

        .date-range-picker button:hover {
            background: var(--secondary-color);
        }

        /* ===== PROGRESS RING ===== */
        .progress-ring {
            position: relative;
            width: 100px;
            height: 100px;
        }

        .progress-ring circle {
            fill: none;
            stroke-width: 8;
            transform: rotate(-90deg);
            transform-origin: 50% 50%;
        }

        .progress-ring-bg {
            stroke: #e2e8f0;
        }

        .progress-ring-fill {
            stroke: var(--primary-color);
            stroke-linecap: round;
            transition: stroke-dashoffset 0.5s ease;
        }

        .progress-ring-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 20px;
            font-weight: 800;
            color: var(--primary-color);
        }

        /* ===== LOADING OVERLAY ===== */
        .loading-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            backdrop-filter: blur(10px);
            z-index: 9999;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            gap: 30px;
        }

        .loading-spinner {
            width: 80px;
            height: 80px;
            border: 8px solid rgba(255,255,255,0.1);
            border-top: 8px solid var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .loading-text {
            color: white;
            font-size: 20px;
            font-weight: 600;
            text-align: center;
        }

        /* ===== EMPTY STATES ===== */
        .empty-state {
            text-align: center;
            padding: 60px 40px;
        }

        .empty-state-icon {
            width: 120px;
            height: 120px;
            margin: 0 auto 30px;
            border-radius: 50%;
            background: linear-gradient(135deg, #f1f5f9, #e2e8f0);
            display: flex;
            align-items: center;
            justify-content: center;
            color: #94a3b8;
            font-size: 48px;
        }

        .dark-mode .empty-state-icon {
            background: linear-gradient(135deg, #2d3748, #4a5568);
            color: #64748b;
        }

        .empty-state h3 {
            font-size: 24px;
            font-weight: 700;
            color: var(--dark-color);
            margin-bottom: 15px;
        }

        .empty-state p {
            font-size: 16px;
            color: #64748b;
            max-width: 400px;
            margin: 0 auto 30px;
            line-height: 1.6;
        }

        .dark-mode .empty-state p {
            color: #94a3b8;
        }

        .empty-state button {
            padding: 12px 30px;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: var(--radius-sm);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
        }

        .empty-state button:hover {
            background: var(--secondary-color);
            transform: translateY(-2px);
        }

        /* ===== GRADIENT BACKGROUNDS ===== */
        .gradient-bg {
            background: linear-gradient(135deg, 
                rgba(67, 97, 238, 0.1) 0%,
                rgba(76, 201, 240, 0.1) 50%,
                rgba(58, 12, 163, 0.1) 100%);
            border-radius: var(--radius-lg);
            padding: 40px;
            margin-bottom: 40px;
        }

        .dark-mode .gradient-bg {
            background: linear-gradient(135deg,
                rgba(67, 97, 238, 0.2) 0%,
                rgba(76, 201, 240, 0.2) 50%,
                rgba(58, 12, 163, 0.2) 100%);
        }

        /* ===== PULSE ANIMATION ===== */
        .pulse-animation {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% {
                box-shadow: 0 0 0 0 rgba(67, 97, 238, 0.4);
            }
            70% {
                box-shadow: 0 0 0 20px rgba(67, 97, 238, 0);
            }
            100% {
                box-shadow: 0 0 0 0 rgba(67, 97, 238, 0);
            }
        }

        /* ===== WAVE EFFECT ===== */
        .wave-container {
            position: relative;
            overflow: hidden;
            border-radius: var(--radius-md);
        }

        .wave {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 100px;
            background: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDBweCIgdmlld0JveD0iMCAwIDEyODAgMTQwIiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik0wIDUyLjE3M0MyMTMuMyAyMy43MyAyOTkuNSAxMy4wODMgNTU2LjkyIDUyLjE3M2MxODMuNDUgMzQuMyAzMzMuNjIgNTIuMTczIDQ4Ny4wOCA1Mi4xNzMgMTUzLjQ2IDAgMjU3LjUzLTM3LjUgNTU1Ljk5LTcwLjk5djkwSDB6IiBmaWxsPSIjNDM2MWVlIiBmaWxsLW9wYWNpdHk9IjAuMyIvPjwvc3ZnPg==') repeat-x;
            animation: wave 20s linear infinite;
        }

        @keyframes wave {
            0% { transform: translateX(0); }
            100% { transform: translateX(-1280px); }
        }

        /* ===== GLASS EFFECT ===== */
        .glass-effect {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .dark-mode .glass-effect {
            background: rgba(30, 41, 59, 0.7);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* ===== NEUMORPHISM ===== */
        .neu-card {
            background: var(--light-color);
            border-radius: var(--radius-md);
            box-shadow: 
                8px 8px 16px rgba(0, 0, 0, 0.1),
                -8px -8px 16px rgba(255, 255, 255, 0.8);
        }

        .dark-mode .neu-card {
            background: #1e293b;
            box-shadow: 
                8px 8px 16px rgba(0, 0, 0, 0.3),
                -8px -8px 16px rgba(255, 255, 255, 0.05);
        }

        /* ===== HOVER EFFECTS ===== */
        .hover-lift {
            transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .hover-lift:hover {
            transform: translateY(-10px);
        }

        .hover-scale {
            transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .hover-scale:hover {
            transform: scale(1.05);
        }

        .hover-rotate {
            transition: transform 0.3s ease;
        }

        .hover-rotate:hover {
            transform: rotate(5deg);
        }

        /* ===== TEXT EFFECTS ===== */
        .gradient-text {
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .text-shadow {
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        /* ===== BORDER ANIMATIONS ===== */
        .border-animation {
            position: relative;
            border: 2px solid transparent;
            background-clip: padding-box;
        }

        .border-animation::after {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color), var(--success-color));
            border-radius: inherit;
            z-index: -1;
            animation: borderRotate 3s linear infinite;
        }

        @keyframes borderRotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* ===== SHIMMER EFFECT ===== */
        .shimmer {
            position: relative;
            overflow: hidden;
        }

        .shimmer::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                90deg,
                transparent,
                rgba(255, 255, 255, 0.2),
                transparent
            );
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        /* ===== FADE IN ANIMATIONS ===== */
        .fade-in {
            animation: fadeIn 0.5s ease;
        }

        .fade-in-up {
            animation: fadeInUp 0.5s ease;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .fade-in-down {
            animation: fadeInDown 0.5s ease;
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .fade-in-left {
            animation: fadeInLeft 0.5s ease;
        }

        @keyframes fadeInLeft {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .fade-in-right {
            animation: fadeInRight 0.5s ease;
        }

        @keyframes fadeInRight {
            from {
                opacity: 0;
                transform: translateX(20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        /* ===== BOUNCE ANIMATIONS ===== */
        .bounce {
            animation: bounce 0.5s;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }

        /* ===== SLIDE IN ANIMATIONS ===== */
        .slide-in {
            animation: slideIn 0.3s ease;
        }

        /* ===== ROTATE ANIMATIONS ===== */
        .rotate {
            animation: rotate 0.5s ease;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        /* ===== PULSE ANIMATIONS ===== */
        .pulse {
            animation: pulse 2s infinite;
        }

        /* ===== FLIP ANIMATIONS ===== */
        .flip {
            animation: flip 0.6s ease;
        }

        @keyframes flip {
            0% { transform: perspective(400px) rotateY(0); }
            100% { transform: perspective(400px) rotateY(360deg); }
        }

        /* ===== ZOOM ANIMATIONS ===== */
        .zoom-in {
            animation: zoomIn 0.3s ease;
        }

        @keyframes zoomIn {
            from { transform: scale(0.5); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        .zoom-out {
            animation: zoomOut 0.3s ease;
        }

        @keyframes zoomOut {
            from { transform: scale(1.5); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        /* ===== TYPEWRITER EFFECT ===== */
        .typewriter {
            overflow: hidden;
            border-right: 2px solid var(--primary-color);
            white-space: nowrap;
            animation: typing 3.5s steps(40, end), blink-caret 0.75s step-end infinite;
        }

        @keyframes typing {
            from { width: 0 }
            to { width: 100% }
        }

        @keyframes blink-caret {
            from, to { border-color: transparent }
            50% { border-color: var(--primary-color) }
        }
    </style>
</head>
<body>
    <!-- MOBILE MENU TOGGLE -->
    <button class="mobile-menu-toggle" onclick="toggleMobileMenu()">
        <i class="fas fa-bars"></i>
    </button>

    <!-- SIDEBAR -->
    <nav class="sidebar active">
        <div class="logo">
            <i class="fas fa-wallet"></i>
            <span>SmartFinance Pro</span>
            <button class="sidebar-toggle" onclick="toggleSidebar()">
                <i class="fas fa-chevron-left"></i>
            </button>
        </div>
        
        <ul class="nav-links">
            <li><a href="#" class="active" onclick="showSection('dashboard')">
                <i class="fas fa-home"></i><span>Dashboard</span>
            </a></li>
            <li><a href="#" onclick="showSection('transactions')">
                <i class="fas fa-exchange-alt"></i><span>Transactions</span>
                <span class="nav-badge" id="transactions-badge">0</span>
            </a></li>
            <li><a href="#" onclick="showAddModal()">
                <i class="fas fa-plus-circle"></i><span>Add Transaction</span>
                <span class="nav-badge pulse">New</span>
            </a></li>
            <li><a href="#" onclick="showSection('budgets')">
                <i class="fas fa-chart-pie"></i><span>Budgets</span>
                <span class="nav-badge" id="budgets-badge">0</span>
            </a></li>
            <li><a href="#" onclick="showSection('goals')">
                <i class="fas fa-bullseye"></i><span>Goals</span>
                <span class="nav-badge" id="goals-badge">0</span>
            </a></li>
            <li><a href="#" onclick="showSection('reports')">
                <i class="fas fa-chart-bar"></i><span>Reports</span>
            </a></li>
            <li><a href="#" onclick="showSection('investments')">
                <i class="fas fa-chart-line"></i><span>Investments</span>
            </a></li>
            <li><a href="#" onclick="showSection('recurring')">
                <i class="fas fa-redo-alt"></i><span>Recurring</span>
            </a></li>
            <li><a href="#" onclick="showSection('insights')">
                <i class="fas fa-lightbulb"></i><span>Insights</span>
                <span class="nav-badge" id="insights-badge">3</span>
            </a></li>
            <li><a href="#" onclick="showSection('analytics')">
                <i class="fas fa-chart-network"></i><span>Analytics</span>
            </a></li>
            <li><a href="#" onclick="showSection('settings')">
                <i class="fas fa-cog"></i><span>Settings</span>
            </a></li>
            <li><a href="#" onclick="showSection('help')">
                <i class="fas fa-question-circle"></i><span>Help</span>
            </a></li>
        </ul>

        <div class="user-quick-stats mt-5">
            <div class="stat-item glass-effect">
                <div class="stat-icon">
                    <i class="fas fa-piggy-bank"></i>
                </div>
                <div class="stat-info">
                    <h4>Daily Average</h4>
                    <div class="value">$45.20</div>
                </div>
            </div>
        </div>
    </nav>

    <!-- MAIN CONTENT -->
    <main class="main-content">
        <!-- HEADER -->
        <header class="header glass-effect">
            <h1 id="page-title">
                <i class="fas fa-home"></i> Dashboard
            </h1>
            
            <div class="header-controls">
                <div class="search-bar">
                    <i class="fas fa-search"></i>
                    <input type="text" id="searchInput" placeholder="Search transactions, budgets, goals..." 
                           onkeyup="searchContent(this.value)">
                </div>
                
                <button class="theme-toggle" onclick="toggleTheme()" title="Toggle Theme">
                    <i class="fas fa-moon"></i> <span>Theme</span>
                </button>
                
                <button class="notification-btn" onclick="toggleNotifications()" title="Notifications">
                    <i class="fas fa-bell"></i>
                    <span class="notification-badge">3</span>
                </button>
                
                <button class="add-btn" onclick="showAddModal()" title="Add Transaction">
                    <i class="fas fa-plus"></i> <span>Add Transaction</span>
                </button>
                
                <div class="user-profile" onclick="showUserMenu()">
                    <div class="user-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="user-info">
                        <div class="user-name">John Doe</div>
                        <div class="user-email">john@example.com</div>
                    </div>
                    <i class="fas fa-chevron-down"></i>
                </div>
            </div>
        </header>

        <!-- TOAST CONTAINER -->
        <div class="toast-container" id="toastContainer"></div>

        <!-- DASHBOARD SECTION -->
        <section id="dashboard" class="section active">
            <!-- QUICK STATS -->
            <div class="quick-stats">
                <div class="stat-item hover-lift">
                    <div class="stat-icon">
                        <i class="fas fa-bolt"></i>
                    </div>
                    <div class="stat-info">
                        <h4>Today's Spending</h4>
                        <div class="value">$85.50</div>
                    </div>
                </div>
                <div class="stat-item hover-lift">
                    <div class="stat-icon" style="background: linear-gradient(135deg, #2ecc71, #27ae60);">
                        <i class="fas fa-arrow-up"></i>
                    </div>
                    <div class="stat-info">
                        <h4>Savings Rate</h4>
                        <div class="value">24.5%</div>
                    </div>
                </div>
                <div class="stat-item hover-lift">
                    <div class="stat-icon" style="background: linear-gradient(135deg, #f72585, #b5179e);">
                        <i class="fas fa-fire"></i>
                    </div>
                    <div class="stat-info">
                        <h4>Streak</h4>
                        <div class="value">14 days</div>
                    </div>
                </div>
                <div class="stat-item hover-lift">
                    <div class="stat-icon" style="background: linear-gradient(135deg, #f8961e, #f3722c);">
                        <i class="fas fa-trophy"></i>
                    </div>
                    <div class="stat-info">
                        <h4>Achievements</h4>
                        <div class="value">8/15</div>
                    </div>
                </div>
            </div>

            <!-- DASHBOARD CARDS -->
            <div class="dashboard-cards">
                <div class="card balance hover-lift">
                    <div class="card-header">
                        <h3>Total Balance</h3>
                        <div class="card-icon">
                            <i class="fas fa-wallet"></i>
                        </div>
                    </div>
                    <div class="card-value" id="total-balance">$5,432.80</div>
                    <div class="card-change positive">
                        <i class="fas fa-arrow-up"></i> 12.5% from last month
                    </div>
                    <div class="sparkline" id="balance-sparkline"></div>
                </div>
                
                <div class="card income hover-lift">
                    <div class="card-header">
                        <h3>Monthly Income</h3>
                        <div class="card-icon">
                            <i class="fas fa-money-bill-wave"></i>
                        </div>
                    </div>
                    <div class="card-value" id="total-income">$3,250.00</div>
                    <div class="card-change positive">
                        <i class="fas fa-arrow-up"></i> 8.2% from last month
                    </div>
                    <div class="sparkline" id="income-sparkline"></div>
                </div>
                
                <div class="card expenses hover-lift">
                    <div class="card-header">
                        <h3>Monthly Expenses</h3>
                        <div class="card-icon">
                            <i class="fas fa-shopping-cart"></i>
                        </div>
                    </div>
                    <div class="card-value" id="total-expenses">$1,845.20</div>
                    <div class="card-change negative">
                        <i class="fas fa-arrow-down"></i> 5.3% from last month
                    </div>
                    <div class="sparkline" id="expenses-sparkline"></div>
                </div>
                
                <div class="card savings hover-lift">
                    <div class="card-header">
                        <h3>Monthly Savings</h3>
                        <div class="card-icon">
                            <i class="fas fa-piggy-bank"></i>
                        </div>
                    </div>
                    <div class="card-value" id="monthly-savings">$1,404.80</div>
                    <div class="card-change positive">
                        <i class="fas fa-arrow-up"></i> 15.7% from last month
                    </div>
                    <div class="sparkline" id="savings-sparkline"></div>
                </div>
            </div>

            <!-- CHARTS CONTAINER -->
            <div class="charts-container">
                <div class="chart-box hover-lift">
                    <h3><i class="fas fa-chart-pie"></i> Expenses by Category</h3>
                    <canvas id="categoryChart"></canvas>
                    <div class="chart-legend" id="categoryLegend"></div>
                </div>
                
                <div class="chart-box hover-lift">
                    <h3><i class="fas fa-chart-line"></i> Monthly Trend</h3>
                    <canvas id="monthlyTrendChart"></canvas>
                    <div class="date-range-picker mt-3">
                        <input type="month" id="trendMonth" value="2024-01">
                        <button onclick="updateTrendChart()">Update</button>
                    </div>
                </div>
            </div>

            <!-- RECENT TRANSACTIONS & QUICK ACTIONS -->
            <div class="grid-2-col">
                <div class="transactions-section hover-lift">
                    <div class="section-header">
                        <h2><i class="fas fa-history"></i> Recent Transactions</h2>
                        <div class="d-flex gap-2">
                            <button class="export-btn" onclick="exportTransactions()">
                                <i class="fas fa-download"></i> Export
                            </button>
                            <a href="#" onclick="showSection('transactions')" 
                               class="btn-primary" style="text-decoration: none;">
                                View All
                            </a>
                        </div>
                    </div>
                    <div class="transactions-list" id="recent-transactions">
                        <!-- Filled by JavaScript -->
                    </div>
                </div>
                
                <div class="quick-actions">
                    <div class="action-button" onclick="showAddModal()">
                        <div class="action-icon">
                            <i class="fas fa-plus"></i>
                        </div>
                        <div class="action-title">Add Transaction</div>
                    </div>
                    <div class="action-button" onclick="showSection('budgets')">
                        <div class="action-icon" style="background: linear-gradient(135deg, #2ecc71, #27ae60);">
                            <i class="fas fa-chart-pie"></i>
                        </div>
                        <div class="action-title">Manage Budgets</div>
                    </div>
                    <div class="action-button" onclick="showSection('goals')">
                        <div class="action-icon" style="background: linear-gradient(135deg, #f72585, #b5179e);">
                            <i class="fas fa-bullseye"></i>
                        </div>
                        <div class="action-title">Set Goals</div>
                    </div>
                    <div class="action-button" onclick="showSection('reports')">
                        <div class="action-icon" style="background: linear-gradient(135deg, #f8961e, #f3722c);">
                            <i class="fas fa-file-invoice-dollar"></i>
                        </div>
                        <div class="action-title">Generate Report</div>
                    </div>
                </div>
            </div>

            <!-- BUDGET OVERVIEW -->
            <div class="section-header mt-5">
                <h2><i class="fas fa-chart-pie"></i> Budget Overview</h2>
                <a href="#" onclick="showSection('budgets')" class="text-primary">View All</a>
            </div>
            <div class="budgets-grid" id="budgets-overview">
                <!-- Filled by JavaScript -->
            </div>

            <!-- GOALS PROGRESS -->
            <div class="section-header mt-5">
                <h2><i class="fas fa-bullseye"></i> Goals Progress</h2>
                <a href="#" onclick="showSection('goals')" class="text-primary">View All</a>
            </div>
            <div class="goals-container" id="goals-overview">
                <!-- Filled by JavaScript -->
            </div>

            <!-- INSIGHTS -->
            <div class="section-header mt-5">
                <h2><i class="fas fa-lightbulb"></i> Financial Insights</h2>
            </div>
            <div class="insights-container">
                <div class="insight-card hover-lift">
                    <div class="insight-header">
                        <div class="insight-icon">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <div class="insight-title">Spending Alert</div>
                    </div>
                    <div class="insight-content">
                        Your food expenses are 15% higher than last month. Consider meal planning to save more.
                    </div>
                    <div class="insight-tip">
                        <strong>Tip:</strong> Try cooking at home 4 times a week to save up to $200/month.
                    </div>
                </div>
                <div class="insight-card hover-lift">
                    <div class="insight-header">
                        <div class="insight-icon" style="background: linear-gradient(135deg, #2ecc71, #27ae60);">
                            <i class="fas fa-piggy-bank"></i>
                        </div>
                        <div class="insight-title">Savings Opportunity</div>
                    </div>
                    <div class="insight-content">
                        You're on track to save $3,000 this quarter. Increase your savings rate by 5% for an extra $450.
                    </div>
                    <div class="insight-tip">
                        <strong>Tip:</strong> Automate your savings to ensure consistency.
                    </div>
                </div>
                <div class="insight-card hover-lift">
                    <div class="insight-header">
                        <div class="insight-icon" style="background: linear-gradient(135deg, #f72585, #b5179e);">
                            <i class="fas fa-bell"></i>
                        </div>
                        <div class="insight-title">Upcoming Bills</div>
                    </div>
                    <div class="insight-content">
                        You have 3 bills due in the next 7 days totaling $285. Make sure to budget accordingly.
                    </div>
                    <div class="insight-tip">
                        <strong>Tip:</strong> Set up automatic payments to avoid late fees.
                    </div>
                </div>
            </div>
        </section>

        <!-- TRANSACTIONS SECTION -->
        <section id="transactions" class="section" style="display: none;">
            <div class="section-header">
                <h2><i class="fas fa-exchange-alt"></i> All Transactions</h2>
                <div class="d-flex align-center gap-3">
                    <div class="date-range-picker">
                        <input type="date" id="startDate" value="2024-01-01">
                        <span>to</span>
                        <input type="date" id="endDate" value="2024-12-31">
                        <button onclick="filterByDate()">Filter</button>
                    </div>
                    <div class="filters">
                        <button class="filter-btn active" onclick="filterTransactions('all')">All</button>
                        <button class="filter-btn" onclick="filterTransactions('income')">Income</button>
                        <button class="filter-btn" onclick="filterTransactions('expense')">Expenses</button>
                        <select class="filter-btn" onchange="filterByCategory(this.value)">
                            <option value="all">All Categories</option>
                            <option value="food">Food</option>
                            <option value="transport">Transport</option>
                            <option value="shopping">Shopping</option>
                            <option value="bills">Bills</option>
                            <option value="entertainment">Entertainment</option>
                            <option value="health">Health</option>
                            <option value="education">Education</option>
                        </select>
                    </div>
                    <button class="export-btn" onclick="exportTransactions()">
                        <i class="fas fa-download"></i> Export CSV
                    </button>
                </div>
            </div>
            
            <div class="stats-cards mb-4">
                <div class="stat-card">
                    <div class="stat-card-header">
                        <div class="stat-card-icon">
                            <i class="fas fa-filter"></i>
                        </div>
                        <div class="stat-card-title">Filtered Transactions</div>
                    </div>
                    <div class="stat-card-value" id="filtered-count">0</div>
                    <div class="stat-card-change positive" id="filtered-total">$0.00</div>
                </div>
                <div class="stat-card">
                    <div class="stat-card-header">
                        <div class="stat-card-icon" style="background: linear-gradient(135deg, #2ecc71, #27ae60);">
                            <i class="fas fa-arrow-up"></i>
                        </div>
                        <div class="stat-card-title">Total Income</div>
                    </div>
                    <div class="stat-card-value" id="filtered-income">$0.00</div>
                    <div class="stat-card-change positive">+0%</div>
                </div>
                <div class="stat-card">
                    <div class="stat-card-header">
                        <div class="stat-card-icon" style="background: linear-gradient(135deg, #f72585, #b5179e);">
                            <i class="fas fa-arrow-down"></i>
                        </div>
                        <div class="stat-card-title">Total Expenses</div>
                    </div>
                    <div class="stat-card-value" id="filtered-expenses">$0.00</div>
                    <div class="stat-card-change negative">+0%</div>
                </div>
                <div class="stat-card">
                    <div class="stat-card-header">
                        <div class="stat-card-icon" style="background: linear-gradient(135deg, #4cc9f0, #4895ef);">
                            <i class="fas fa-calculator"></i>
                        </div>
                        <div class="stat-card-title">Net Balance</div>
                    </div>
                    <div class="stat-card-value" id="filtered-balance">$0.00</div>
                    <div class="stat-card-change positive">+0%</div>
                </div>
            </div>
            
            <div class="transactions-list" id="all-transactions">
                <!-- Filled by JavaScript -->
            </div>
            
            <div class="text-center mt-4">
                <button class="btn-secondary" onclick="loadMoreTransactions()">
                    <i class="fas fa-redo"></i> Load More Transactions
                </button>
            </div>
        </section>

        <!-- BUDGETS SECTION -->
        <section id="budgets" class="section" style="display: none;">
            <div class="section-header">
                <h2><i class="fas fa-chart-pie"></i> Budget Management</h2>
                <div class="d-flex gap-2">
                    <button class="btn-success" onclick="addBudgetModal()">
                        <i class="fas fa-plus"></i> Add Budget
                    </button>
                    <button class="export-btn" onclick="exportBudgets()">
                        <i class="fas fa-download"></i> Export
                    </button>
                </div>
            </div>
            
            <div class="budgets-grid" id="budgets-container">
                <!-- Filled by JavaScript -->
            </div>
            
            <div class="gradient-bg mt-5">
                <h3 class="text-center mb-4">Budget Planning Tips</h3>
                <div class="insights-container">
                    <div class="insight-card">
                        <div class="insight-header">
                            <div class="insight-icon">
                                <i class="fas fa-lightbulb"></i>
                            </div>
                            <div class="insight-title">50/30/20 Rule</div>
                        </div>
                        <div class="insight-content">
                            Allocate 50% for needs, 30% for wants, and 20% for savings and debt repayment.
                        </div>
                    </div>
                    <div class="insight-card">
                        <div class="insight-header">
                            <div class="insight-icon" style="background: linear-gradient(135deg, #2ecc71, #27ae60);">
                                <i class="fas fa-chart-line"></i>
                            </div>
                            <div class="insight-title">Track Regularly</div>
                        </div>
                        <div class="insight-content">
                            Review your budget weekly to stay on track and make adjustments as needed.
                        </div>
                    </div>
                    <div class="insight-card">
                        <div class="insight-header">
                            <div class="insight-icon" style="background: linear-gradient(135deg, #f72585, #b5179e);">
                                <i class="fas fa-bell"></i>
                            </div>
                            <div class="insight-title">Set Alerts</div>
                        </div>
                        <div class="insight-content">
                            Enable notifications when you're approaching budget limits in any category.
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- GOALS SECTION -->
        <section id="goals" class="section" style="display: none;">
            <div class="section-header">
                <h2><i class="fas fa-bullseye"></i> Savings Goals</h2>
                <div class="d-flex gap-2">
                    <button class="btn-success" onclick="addGoalModal()">
                        <i class="fas fa-plus"></i> Add Goal
                    </button>
                    <button class="export-btn" onclick="exportGoals()">
                        <i class="fas fa-download"></i> Export
                    </button>
                </div>
            </div>
            
            <div class="goals-container" id="goals-container">
                <!-- Filled by JavaScript -->
            </div>
            
            <div class="achievements-grid mt-5">
                <div class="achievement-badge">
                    <div class="badge-icon">
                        <i class="fas fa-piggy-bank"></i>
                    </div>
                    <div class="badge-title">First Saver</div>
                    <div class="badge-description">Save your first $100</div>
                </div>
                <div class="achievement-badge">
                    <div class="badge-icon">
                        <i class="fas fa-trophy"></i>
                    </div>
                    <div class="badge-title">Budget Master</div>
                    <div class="badge-description">Stay within budget for 30 days</div>
                </div>
                <div class="achievement-badge locked">
                    <div class="badge-icon">
                        <i class="fas fa-gem"></i>
                    </div>
                    <div class="badge-title">Savings Guru</div>
                    <div class="badge-description">Save $10,000 total</div>
                </div>
                <div class="achievement-badge">
                    <div class="badge-progress">75%</div>
                    <div class="badge-icon">
                        <i class="fas fa-fire"></i>
                    </div>
                    <div class="badge-title">Consistency King</div>
                    <div class="badge-description">Track expenses for 14 days straight</div>
                </div>
            </div>
        </section>

        <!-- REPORTS SECTION -->
        <section id="reports" class="section" style="display: none;">
            <h2><i class="fas fa-chart-bar"></i> Financial Reports</h2>
            
            <div class="report-filters">
                <select id="report-type" class="date-filter" onchange="generateReport()">
                    <option value="monthly">Monthly Report</option>
                    <option value="yearly">Yearly Report</option>
                    <option value="quarterly">Quarterly Report</option>
                    <option value="category">Category Analysis</option>
                    <option value="trend">Spending Trends</option>
                    <option value="comparison">Year Comparison</option>
                </select>
                <input type="month" id="report-month" class="date-filter" value="2024-01" onchange="generateReport()">
                <input type="number" id="report-year" class="date-filter" value="2024" min="2000" max="2030" onchange="generateReport()">
                <button class="export-btn" onclick="exportReport()">
                    <i class="fas fa-download"></i> Export PDF
                </button>
            </div>
            
            <div id="report-content">
                <!-- Filled by JavaScript -->
            </div>
            
            <div class="viz-container mt-5">
                <div class="viz-header">
                    <div class="viz-title">Spending Trends Visualization</div>
                    <div class="viz-controls">
                        <button class="viz-control active" onclick="changeVizType('line')">Line</button>
                        <button class="viz-control" onclick="changeVizType('bar')">Bar</button>
                        <button class="viz-control" onclick="changeVizType('area')">Area</button>
                    </div>
                </div>
                <div class="viz-content">
                    <canvas id="trendVizChart"></canvas>
                </div>
            </div>
        </section>

        <!-- ADD MORE SECTIONS HERE (Investments, Recurring, Insights, Analytics, Settings, Help) -->

    </main>

    <!-- ADD TRANSACTION MODAL -->
    <div id="addModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-plus-circle"></i> Add Transaction</h2>
                <button class="close-modal" onclick="closeModal()">&times;</button>
            </div>
            <form id="transactionForm" onsubmit="addTransaction(event)">
                <div class="form-group">
                    <label>Transaction Type</label>
                    <div class="radio-group">
                        <label class="radio-label">
                            <input type="radio" name="type" value="income" checked onchange="toggleTransactionType()">
                            <i class="fas fa-money-bill-wave"></i> Income
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="type" value="expense" onchange="toggleTransactionType()">
                            <i class="fas fa-shopping-cart"></i> Expense
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="type" value="transfer" onchange="toggleTransactionType()">
                            <i class="fas fa-exchange-alt"></i> Transfer
                        </label>
                    </div>
                </div>

                <div class="form-group">
                    <label for="description">Description *</label>
                    <input type="text" id="description" class="form-control" 
                           placeholder="Enter transaction description" required>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="amount">Amount ($) *</label>
                        <input type="number" id="amount" class="form-control" 
                               placeholder="0.00" step="0.01" min="0" required>
                    </div>
                    <div class="form-group">
                        <label for="date">Date *</label>
                        <input type="date" id="date" class="form-control" required>
                    </div>
                </div>

                <div class="form-group" id="category-group">
                    <label>Category *</label>
                    <div class="category-options">
                        <div class="category-option" data-category="food" onclick="selectCategory('food')">
                            <i class="fas fa-utensils"></i> Food
                        </div>
                        <div class="category-option" data-category="transport" onclick="selectCategory('transport')">
                            <i class="fas fa-car"></i> Transport
                        </div>
                        <div class="category-option" data-category="shopping" onclick="selectCategory('shopping')">
                            <i class="fas fa-shopping-bag"></i> Shopping
                        </div>
                        <div class="category-option" data-category="bills" onclick="selectCategory('bills')">
                            <i class="fas fa-file-invoice-dollar"></i> Bills
                        </div>
                        <div class="category-option" data-category="entertainment" onclick="selectCategory('entertainment')">
                            <i class="fas fa-film"></i> Entertainment
                        </div>
                        <div class="category-option" data-category="health" onclick="selectCategory('health')">
                            <i class="fas fa-heartbeat"></i> Health
                        </div>
                        <div class="category-option" data-category="education" onclick="selectCategory('education')">
                            <i class="fas fa-graduation-cap"></i> Education
                        </div>
                        <div class="category-option" data-category="other" onclick="selectCategory('other')">
                            <i class="fas fa-ellipsis-h"></i> Other
                        </div>
                    </div>
                    <input type="hidden" id="category" value="food" required>
                </div>

                <div class="form-group" id="account-group" style="display: none;">
                    <label>Account</label>
                    <select id="account" class="form-control">
                        <option value="checking">Checking Account</option>
                        <option value="savings">Savings Account</option>
                        <option value="credit">Credit Card</option>
                        <option value="cash">Cash</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="notes">Notes (Optional)</label>
                    <textarea id="notes" class="form-control" rows="3" 
                              placeholder="Add any additional notes about this transaction..."></textarea>
                </div>

                <div class="form-group">
                    <label>
                        <input type="checkbox" id="isRecurring"> Set as recurring transaction
                    </label>
                </div>

                <div id="recurring-options" style="display: none;">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="recurring-frequency">Frequency</label>
                            <select id="recurring-frequency" class="form-control">
                                <option value="daily">Daily</option>
                                <option value="weekly">Weekly</option>
                                <option value="monthly">Monthly</option>
                                <option value="yearly">Yearly</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="recurring-end">End Date (Optional)</label>
                            <input type="date" id="recurring-end" class="form-control">
                        </div>
                    </div>
                </div>

                <div class="form-buttons">
                    <button type="button" class="btn-secondary" onclick="closeModal()">
                        Cancel
                    </button>
                    <button type="submit" class="btn-primary">
                        <i class="fas fa-save"></i> Save Transaction
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- NOTIFICATIONS PANEL -->
    <div class="notifications-panel" id="notificationsPanel">
        <div class="notifications-header">
            <h3><i class="fas fa-bell"></i> Notifications</h3>
            <button class="close-modal" onclick="toggleNotifications()">&times;</button>
        </div>
        <div class="notifications-content" id="notificationsContent">
            <!-- Notifications will be added here -->
        </div>
    </div>

    <!-- CHATBOT ASSISTANT -->
    <button class="chatbot-toggle" onclick="toggleChatbot()">
        <i class="fas fa-robot"></i>
    </button>
    
    <div class="chatbot-container" id="chatbotContainer">
        <div class="chatbot-header">
            <h3><i class="fas fa-robot"></i> Finance Assistant</h3>
            <button class="close-chatbot" onclick="toggleChatbot()">&times;</button>
        </div>
        <div class="chatbot-messages" id="chatbotMessages">
            <div class="message bot">
                <div class="message-content">
                    Hello! I'm your finance assistant. How can I help you today?
                </div>
            </div>
        </div>
        <div class="chatbot-input">
            <form onsubmit="sendChatbotMessage(event)">
                <input type="text" id="chatbotInput" placeholder="Ask me anything...">
                <button type="submit"><i class="fas fa-paper-plane"></i></button>
            </form>
        </div>
    </div>

    <!-- LOADING OVERLAY -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner"></div>
        <div class="loading-text">Processing your request...</div>
    </div>

    <!-- ACHIEVEMENT POPUP -->
    <div class="achievement-popup" id="achievementPopup">
        <div class="achievement-popup-icon">
            <i class="fas fa-trophy"></i>
        </div>
        <h3 id="achievementTitle">Achievement Unlocked!</h3>
        <p id="achievementDescription">You've completed a milestone!</p>
        <button onclick="closeAchievementPopup()">Awesome!</button>
    </div>

    <!-- WELCOME TOUR -->
    <div class="tour-overlay" id="tourOverlay"></div>
    <div class="tour-step" id="tourStep1" style="top: 100px; left: 300px;">
        <div class="tour-header">
            <div class="tour-title">Welcome to SmartFinance Pro! </div>
        </div>
        <div class="tour-content">
            Let me show you around your new financial dashboard. Click next to continue.
        </div>
        <div class="tour-actions">
            <button class="tour-skip" onclick="skipTour()">Skip Tour</button>
            <button class="tour-next" onclick="nextTourStep()">Next</button>
        </div>
    </div>

    <script>
        // ===== ENHANCED FINANCE TRACKER CLASS =====
        class EnhancedFinanceTracker {
            constructor() {
                this.transactions = JSON.parse(localStorage.getItem('transactions')) || [];
                this.budgets = JSON.parse(localStorage.getItem('budgets')) || [];
                this.goals = JSON.parse(localStorage.getItem('goals')) || [];
                this.settings = JSON.parse(localStorage.getItem('settings')) || this.getDefaultSettings();
                this.achievements = JSON.parse(localStorage.getItem('achievements')) || this.getDefaultAchievements();
                this.notifications = JSON.parse(localStorage.getItem('notifications')) || [];
                this.recurringTransactions = JSON.parse(localStorage.getItem('recurringTransactions')) || [];
                this.charts = {};
                this.selectedCategory = 'food';
                this.currentFilter = 'all';
                this.currentPage = 1;
                this.itemsPerPage = 10;
                
                this.initializeData();
            }

            getDefaultSettings() {
                return {
                    theme: 'light',
                    currency: 'USD',
                    dateFormat: 'MM/DD/YYYY',
                    budgetAlerts: true,
                    goalNotifications: true,
                    autoBackup: false,
                    backupFrequency: 'weekly'
                };
            }

            getDefaultAchievements() {
                return [
                    { id: 1, name: 'First Transaction', description: 'Added your first transaction', earned: true, progress: 100 },
                    { id: 2, name: 'Budget Master', description: 'Created 3 budgets', earned: false, progress: 66 },
                    { id: 3, name: 'Savings Guru', description: 'Saved $1000 total', earned: false, progress: 45 },
                    { id: 4, name: 'Consistency King', description: 'Tracked expenses for 30 days', earned: false, progress: 14 },
                    { id: 5, name: 'Goal Getter', description: 'Completed 2 savings goals', earned: false, progress: 50 }
                ];
            }

            initializeData() {
                if (this.transactions.length === 0) {
                    this.initializeSampleData();
                }
                if (this.budgets.length === 0) {
                    this.initializeSampleBudgets();
                }
                if (this.goals.length === 0) {
                    this.initializeSampleGoals();
                }
                this.initializeNotifications();
                this.saveAll();
            }

            initializeSampleData() {
                const sampleTransactions = [
                    { 
                        id: 1, 
                        type: 'income', 
                        description: 'Monthly Salary', 
                        amount: 3500, 
                        category: 'income', 
                        date: '2024-01-15',
                        account: 'checking',
                        notes: 'Regular monthly salary',
                        tags: ['salary', 'recurring']
                    },
                    { 
                        id: 2, 
                        type: 'expense', 
                        description: 'Grocery Shopping', 
                        amount: 185.50, 
                        category: 'food', 
                        date: '2024-01-16',
                        account: 'credit',
                        notes: 'Weekly groceries',
                        tags: ['essential', 'food']
                    },
                    { 
                        id: 3, 
                        type: 'expense', 
                        description: 'Gasoline', 
                        amount: 65.25, 
                        category: 'transport', 
                        date: '2024-01-16',
                        account: 'credit',
                        notes: 'Car fuel',
                        tags: ['essential', 'transport']
                    },
                    { 
                        id: 4, 
                        type: 'expense', 
                        description: 'Netflix Subscription', 
                        amount: 15.99, 
                        category: 'entertainment', 
                        date: '2024-01-17',
                        account: 'checking',
                        notes: 'Monthly subscription',
                        tags: ['subscription', 'recurring']
                    },
                    { 
                        id: 5, 
                        type: 'expense', 
                        description: 'Electricity Bill', 
                        amount: 120.75, 
                        category: 'bills', 
                        date: '2024-01-18',
                        account: 'checking',
                        notes: 'Monthly utility bill',
                        tags: ['bill', 'recurring', 'essential']
                    },
                    { 
                        id: 6, 
                        type: 'income', 
                        description: 'Freelance Project', 
                        amount: 850, 
                        category: 'income', 
                        date: '2024-01-20',
                        account: 'checking',
                        notes: 'Web development project',
                        tags: ['freelance', 'one-time']
                    },
                    { 
                        id: 7, 
                        type: 'expense', 
                        description: 'New Clothes', 
                        amount: 245.99, 
                        category: 'shopping', 
                        date: '2024-01-21',
                        account: 'credit',
                        notes: 'Winter clothing',
                        tags: ['shopping', 'luxury']
                    },
                    { 
                        id: 8, 
                        type: 'expense', 
                        description: 'Dinner at Restaurant', 
                        amount: 89.50, 
                        category: 'food', 
                        date: '2024-01-22',
                        account: 'credit',
                        notes: 'Celebration dinner',
                        tags: ['dining', 'luxury']
                    },
                    { 
                        id: 9, 
                        type: 'expense', 
                        description: 'Gym Membership', 
                        amount: 29.99, 
                        category: 'health', 
                        date: '2024-01-23',
                        account: 'checking',
                        notes: 'Monthly gym fee',
                        tags: ['health', 'recurring']
                    },
                    { 
                        id: 10, 
                        type: 'income', 
                        description: 'Stock Dividends', 
                        amount: 150.25, 
                        category: 'income', 
                        date: '2024-01-25',
                        account: 'savings',
                        notes: 'Quarterly dividends',
                        tags: ['investment', 'passive-income']
                    }
                ];

                this.transactions = sampleTransactions;
            }

            initializeSampleBudgets() {
                const sampleBudgets = [
                    { id: 1, category: 'food', limit: 600, spent: 275.00, period: 'monthly', color: '#FF6384' },
                    { id: 2, category: 'transport', limit: 250, spent: 65.25, period: 'monthly', color: '#36A2EB' },
                    { id: 3, category: 'entertainment', limit: 150, spent: 15.99, period: 'monthly', color: '#9966FF' },
                    { id: 4, category: 'shopping', limit: 300, spent: 245.99, period: 'monthly', color: '#FFCE56' },
                    { id: 5, category: 'bills', limit: 400, spent: 120.75, period: 'monthly', color: '#4BC0C0' },
                    { id: 6, category: 'health', limit: 100, spent: 29.99, period: 'monthly', color: '#FF6B6B' }
                ];

                this.budgets = sampleBudgets;
            }

            initializeSampleGoals() {
                const sampleGoals = [
                    { 
                        id: 1, 
                        name: 'New Laptop', 
                        target: 1200, 
                        saved: 800, 
                        deadline: '2024-06-30',
                        color: '#4361ee',
                        icon: 'fas fa-laptop'
                    },
                    { 
                        id: 2, 
                        name: 'Vacation Fund', 
                        target: 2000, 
                        saved: 1200, 
                        deadline: '2024-12-31',
                        color: '#4cc9f0',
                        icon: 'fas fa-umbrella-beach'
                    },
                    { 
                        id: 3, 
                        name: 'Emergency Fund', 
                        target: 5000, 
                        saved: 2500, 
                        deadline: '2024-12-31',
                        color: '#2ecc71',
                        icon: 'fas fa-shield-alt'
                    },
                    { 
                        id: 4, 
                        name: 'Car Down Payment', 
                        target: 3000, 
                        saved: 1500, 
                        deadline: '2024-09-30',
                        color: '#f72585',
                        icon: 'fas fa-car'
                    }
                ];

                this.goals = sampleGoals;
            }

            initializeNotifications() {
                const sampleNotifications = [
                    {
                        id: 1,
                        type: 'warning',
                        title: 'Budget Alert',
                        message: 'You have spent 80% of your Food budget',
                        timestamp: new Date().toISOString(),
                        read: false
                    },
                    {
                        id: 2,
                        type: 'success',
                        title: 'Goal Progress',
                        message: 'You are 75% towards your Laptop goal!',
                        timestamp: new Date(Date.now() - 86400000).toISOString(),
                        read: false
                    },
                    {
                        id: 3,
                        type: 'info',
                        title: 'Bill Reminder',
                        message: 'Electricity bill of $120.75 due in 3 days',
                        timestamp: new Date(Date.now() - 172800000).toISOString(),
                        read: true
                    }
                ];

                this.notifications = sampleNotifications;
            }

            saveAll() {
                localStorage.setItem('transactions', JSON.stringify(this.transactions));
                localStorage.setItem('budgets', JSON.stringify(this.budgets));
                localStorage.setItem('goals', JSON.stringify(this.goals));
                localStorage.setItem('settings', JSON.stringify(this.settings));
                localStorage.setItem('achievements', JSON.stringify(this.achievements));
                localStorage.setItem('notifications', JSON.stringify(this.notifications));
                localStorage.setItem('recurringTransactions', JSON.stringify(this.recurringTransactions));
            }

            // ===== TRANSACTION METHODS =====
            addTransaction(transaction) {
                const newTransaction = {
                    id: Date.now(),
                    ...transaction,
                    date: transaction.date || new Date().toISOString().split('T')[0],
                    createdAt: new Date().toISOString(),
                    tags: transaction.tags || []
                };
                
                this.transactions.unshift(newTransaction);
                
                // Update budget if it's an expense
                if (transaction.type === 'expense') {
                    this.updateBudget(transaction.category, transaction.amount);
                }
                
                // Check for achievements
                this.checkAchievements();
                
                // Generate notifications
                this.generateTransactionNotification(newTransaction);
                
                this.saveAll();
                this.updateUI();
                
                // Show success toast
                this.showToast('Transaction added successfully!', 'success');
                
                return newTransaction;
            }

            updateTransaction(id, updates) {
                const index = this.transactions.findIndex(t => t.id === id);
                if (index !== -1) {
                    const oldTransaction = this.transactions[index];
                    
                    // Refund old budget if it was an expense
                    if (oldTransaction.type === 'expense') {
                        this.updateBudget(oldTransaction.category, -oldTransaction.amount);
                    }
                    
                    // Update transaction
                    this.transactions[index] = { ...this.transactions[index], ...updates };
                    
                    // Apply new budget if it's an expense
                    if (updates.type === 'expense' || oldTransaction.type === 'expense') {
                        const newCategory = updates.category || oldTransaction.category;
                        const newAmount = updates.amount || oldTransaction.amount;
                        this.updateBudget(newCategory, newAmount);
                    }
                    
                    this.saveAll();
                    this.updateUI();
                    this.showToast('Transaction updated successfully!', 'success');
                    return true;
                }
                return false;
            }

            deleteTransaction(id) {
                const transaction = this.transactions.find(t => t.id === id);
                if (transaction) {
                    // Refund budget if deleting expense
                    if (transaction.type === 'expense') {
                        this.updateBudget(transaction.category, -transaction.amount);
                    }
                    
                    this.transactions = this.transactions.filter(t => t.id !== id);
                    this.saveAll();
                    this.updateUI();
                    this.showToast('Transaction deleted successfully!', 'success');
                    return true;
                }
                return false;
            }

            getTransactions(filter = 'all', category = 'all', page = 1) {
                let filtered = this.transactions;
                
                // Apply filters
                if (filter === 'income') filtered = filtered.filter(t => t.type === 'income');
                else if (filter === 'expense') filtered = filtered.filter(t => t.type === 'expense');
                
                if (category !== 'all') filtered = filtered.filter(t => t.category === category);
                
                // Apply date range filter if set
                const startDate = document.getElementById('startDate')?.value;
                const endDate = document.getElementById('endDate')?.value;
                
                if (startDate && endDate) {
                    filtered = filtered.filter(t => {
                        const transDate = new Date(t.date);
                        return transDate >= new Date(startDate) && transDate <= new Date(endDate);
                    });
                }
                
                // Apply search filter if set
                const searchTerm = document.getElementById('searchInput')?.value.toLowerCase();
                if (searchTerm) {
                    filtered = filtered.filter(t => 
                        t.description.toLowerCase().includes(searchTerm) ||
                        t.category.toLowerCase().includes(searchTerm) ||
                        (t.notes && t.notes.toLowerCase().includes(searchTerm))
                    );
                }
                
                // Calculate pagination
                const total = filtered.length;
                const start = (page - 1) * this.itemsPerPage;
                const end = start + this.itemsPerPage;
                const paginated = filtered.slice(start, end);
                
                return {
                    transactions: paginated,
                    total,
                    page,
                    totalPages: Math.ceil(total / this.itemsPerPage),
                    hasMore: end < total
                };
            }

            // ===== BUDGET METHODS =====
            updateBudget(category, amount) {
                const budget = this.budgets.find(b => b.category === category);
                if (budget) {
                    budget.spent += amount;
                    
                    // Generate notification if budget exceeds threshold
                    if (budget.spent > budget.limit * 0.8) {
                        this.generateBudgetNotification(budget);
                    }
                    
                    this.saveAll();
                }
            }

            addBudget(budget) {
                const newBudget = {
                    id: Date.now(),
                    ...budget,
                    spent: budget.spent || 0
                };
                
                this.budgets.push(newBudget);
                this.saveAll();
                this.updateUI();
                this.showToast('Budget added successfully!', 'success');
                return newBudget;
            }

            updateBudgetItem(id, updates) {
                const index = this.budgets.findIndex(b => b.id === id);
                if (index !== -1) {
                    this.budgets[index] = { ...this.budgets[index], ...updates };
                    this.saveAll();
                    this.updateUI();
                    this.showToast('Budget updated successfully!', 'success');
                    return true;
                }
                return false;
            }

            deleteBudget(id) {
                this.budgets = this.budgets.filter(b => b.id !== id);
                this.saveAll();
                this.updateUI();
                this.showToast('Budget deleted successfully!', 'success');
                return true;
            }

            // ===== GOAL METHODS =====
            addGoal(goal) {
                const newGoal = {
                    id: Date.now(),
                    ...goal,
                    saved: goal.saved || 0,
                    createdAt: new Date().toISOString()
                };
                
                this.goals.push(newGoal);
                this.saveAll();
                this.updateUI();
                this.showToast('Goal added successfully!', 'success');
                return newGoal;
            }

            updateGoal(id, amount) {
                const goal = this.goals.find(g => g.id === id);
                if (goal) {
                    goal.saved += amount;
                    
                    // Check if goal is completed
                    if (goal.saved >= goal.target) {
                        this.generateGoalCompletionNotification(goal);
                        this.unlockAchievement('goal_getter');
                    }
                    
                    this.saveAll();
                    this.updateUI();
                    
                    if (amount > 0) {
                        this.showToast(`Added $${amount.toFixed(2)} to "${goal.name}"`, 'success');
                    }
                    return true;
                }
                return false;
            }

            deleteGoal(id) {
                this.goals = this.goals.filter(g => g.id !== id);
                this.saveAll();
                this.updateUI();
                this.showToast('Goal deleted successfully!', 'success');
                return true;
            }

            // ===== ACHIEVEMENT METHODS =====
            checkAchievements() {
                // Check for first transaction achievement
                if (this.transactions.length >= 1) {
                    this.unlockAchievement('first_transaction');
                }
                
                // Check for budget master achievement
                if (this.budgets.length >= 3) {
                    this.unlockAchievement('budget_master');
                }
                
                // Check for savings guru achievement
                const totalSaved = this.getTotalBalance();
                if (totalSaved >= 1000) {
                    this.unlockAchievement('savings_guru');
                }
                
                // Update progress for consistency king
                this.updateAchievementProgress('consistency_king', this.transactions.length);
            }

            unlockAchievement(achievementType) {
                const achievementMap = {
                    'first_transaction': 1,
                    'budget_master': 2,
                    'savings_guru': 3,
                    'consistency_king': 4,
                    'goal_getter': 5
                };
                
                const achievementId = achievementMap[achievementType];
                const achievement = this.achievements.find(a => a.id === achievementId);
                
                if (achievement && !achievement.earned) {
                    achievement.earned = true;
                    achievement.progress = 100;
                    this.saveAll();
                    
                    // Show achievement popup
                    this.showAchievementPopup(achievement.name, achievement.description);
                    
                    // Generate notification
                    this.generateAchievementNotification(achievement);
                }
            }

            updateAchievementProgress(achievementType, progress) {
                const achievementMap = {
                    'consistency_king': 4
                };
                
                const achievementId = achievementMap[achievementType];
                const achievement = this.achievements.find(a => a.id === achievementId);
                
                if (achievement && !achievement.earned) {
                    const newProgress = Math.min((progress / 30) * 100, 100);
                    achievement.progress = newProgress;
                    
                    if (newProgress >= 100) {
                        achievement.earned = true;
                        this.showAchievementPopup(achievement.name, achievement.description);
                    }
                    
                    this.saveAll();
                }
            }

            // ===== NOTIFICATION METHODS =====
            generateTransactionNotification(transaction) {
                const notification = {
                    id: Date.now(),
                    type: transaction.type === 'income' ? 'success' : 'info',
                    title: `${transaction.type === 'income' ? 'Income' : 'Expense'} Added`,
                    message: `${transaction.type === 'income' ? '+' : '-'}$${transaction.amount.toFixed(2)} - ${transaction.description}`,
                    timestamp: new Date().toISOString(),
                    read: false
                };
                
                this.notifications.unshift(notification);
                this.saveAll();
                this.updateNotificationBadges();
            }

            generateBudgetNotification(budget) {
                const percentage = (budget.spent / budget.limit) * 100;
                const notification = {
                    id: Date.now(),
                    type: 'warning',
                    title: 'Budget Alert',
                    message: `You have spent ${percentage.toFixed(1)}% of your ${this.getCategoryName(budget.category)} budget`,
                    timestamp: new Date().toISOString(),
                    read: false
                };
                
                this.notifications.unshift(notification);
                this.saveAll();
                this.updateNotificationBadges();
            }

            generateGoalCompletionNotification(goal) {
                const notification = {
                    id: Date.now(),
                    type: 'success',
                    title: 'Goal Achieved! ',
                    message: `Congratulations! You've reached your "${goal.name}" goal!`,
                    timestamp: new Date().toISOString(),
                    read: false
                };
                
                this.notifications.unshift(notification);
                this.saveAll();
                this.updateNotificationBadges();
            }

            generateAchievementNotification(achievement) {
                const notification = {
                    id: Date.now(),
                    type: 'info',
                    title: 'Achievement Unlocked!',
                    message: `${achievement.name}: ${achievement.description}`,
                    timestamp: new Date().toISOString(),
                    read: false
                };
                
                this.notifications.unshift(notification);
                this.saveAll();
                this.updateNotificationBadges();
            }

            markNotificationAsRead(id) {
                const notification = this.notifications.find(n => n.id === id);
                if (notification) {
                    notification.read = true;
                    this.saveAll();
                    this.updateNotificationBadges();
                    return true;
                }
                return false;
            }

            markAllNotificationsAsRead() {
                this.notifications.forEach(n => n.read = true);
                this.saveAll();
                this.updateNotificationBadges();
            }

            getUnreadNotificationsCount() {
                return this.notifications.filter(n => !n.read).length;
            }

            // ===== CALCULATION METHODS =====
            getTotalBalance() {
                const income = this.transactions
                    .filter(t => t.type === 'income')
                    .reduce((sum, t) => sum + t.amount, 0);
                const expenses = this.transactions
                    .filter(t => t.type === 'expense')
                    .reduce((sum, t) => sum + t.amount, 0);
                return income - expenses;
            }

            getTotalIncome() {
                return this.transactions
                    .filter(t => t.type === 'income')
                    .reduce((sum, t) => sum + t.amount, 0);
            }

            getTotalExpenses() {
                return this.transactions
                    .filter(t => t.type === 'expense')
                    .reduce((sum, t) => sum + t.amount, 0);
            }

            getMonthlySavings() {
                const currentMonth = new Date().getMonth();
                const currentYear = new Date().getFullYear();
                
                const monthlyIncome = this.transactions
                    .filter(t => {
                        const date = new Date(t.date);
                        return t.type === 'income' && 
                               date.getMonth() === currentMonth && 
                               date.getFullYear() === currentYear;
                    })
                    .reduce((sum, t) => sum + t.amount, 0);
                
                const monthlyExpenses = this.transactions
                    .filter(t => {
                        const date = new Date(t.date);
                        return t.type === 'expense' && 
                               date.getMonth() === currentMonth && 
                               date.getFullYear() === currentYear;
                    })
                    .reduce((sum, t) => sum + t.amount, 0);
                
                return monthlyIncome - monthlyExpenses;
            }

            getExpensesByCategory() {
                const categories = ['food', 'transport', 'shopping', 'bills', 'entertainment', 'health', 'education', 'other'];
                const result = {};
                
                categories.forEach(category => {
                    result[category] = this.transactions
                        .filter(t => t.type === 'expense' && t.category === category)
                        .reduce((sum, t) => sum + t.amount, 0);
                });
                
                return result;
            }

            getMonthlyTrend() {
                const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
                const currentMonth = new Date().getMonth();
                const labels = months.slice(Math.max(0, currentMonth - 5), currentMonth + 1);
                
                // Calculate actual data from transactions
                const incomeData = labels.map((month, index) => {
                    const monthIndex = (currentMonth - 5 + index + 12) % 12;
                    return this.transactions
                        .filter(t => {
                            const date = new Date(t.date);
                            return t.type === 'income' && 
                                   date.getMonth() === monthIndex && 
                                   date.getFullYear() === new Date().getFullYear();
                        })
                        .reduce((sum, t) => sum + t.amount, 0);
                });
                
                const expensesData = labels.map((month, index) => {
                    const monthIndex = (currentMonth - 5 + index + 12) % 12;
                    return this.transactions
                        .filter(t => {
                            const date = new Date(t.date);
                            return t.type === 'expense' && 
                                   date.getMonth() === monthIndex && 
                                   date.getFullYear() === new Date().getFullYear();
                        })
                        .reduce((sum, t) => sum + t.amount, 0);
                });
                
                return { labels, income: incomeData, expenses: expensesData };
            }

            // ===== UI UPDATE METHODS =====
            updateUI() {
                this.updateDashboard();
                this.updateTransactions();
                this.updateBudgets();
                this.updateGoals();
                this.updateCharts();
                this.updateNotificationBadges();
                this.updateStats();
            }

            updateDashboard() {
                // Update cards
                document.getElementById('total-balance').textContent = `$${this.getTotalBalance().toFixed(2)}`;
                document.getElementById('total-income').textContent = `$${this.getTotalIncome().toFixed(2)}`;
                document.getElementById('total-expenses').textContent = `$${this.getTotalExpenses().toFixed(2)}`;
                document.getElementById('monthly-savings').textContent = `$${this.getMonthlySavings().toFixed(2)}`;
                
                // Update recent transactions
                const recent = this.transactions.slice(0, 5);
                this.renderTransactions(recent, 'recent-transactions');
                
                // Update sparklines
                this.updateSparklines();
            }

            updateTransactions() {
                const result = this.getTransactions(this.currentFilter, 'all', this.currentPage);
                this.renderTransactions(result.transactions, 'all-transactions');
                
                // Update filtered stats
                document.getElementById('filtered-count').textContent = result.total;
                document.getElementById('filtered-total').textContent = `$${result.transactions.reduce((sum, t) => sum + t.amount, 0).toFixed(2)}`;
                
                const filteredIncome = result.transactions
                    .filter(t => t.type === 'income')
                    .reduce((sum, t) => sum + t.amount, 0);
                const filteredExpenses = result.transactions
                    .filter(t => t.type === 'expense')
                    .reduce((sum, t) => sum + t.amount, 0);
                
                document.getElementById('filtered-income').textContent = `$${filteredIncome.toFixed(2)}`;
                document.getElementById('filtered-expenses').textContent = `$${filteredExpenses.toFixed(2)}`;
                document.getElementById('filtered-balance').textContent = `$${(filteredIncome - filteredExpenses).toFixed(2)}`;
            }

            updateBudgets() {
                const container = document.getElementById('budgets-container');
                if (!container) return;
                
                container.innerHTML = this.budgets.map(budget => {
                    const percentage = (budget.spent / budget.limit) * 100;
                    const progressColor = percentage > 100 ? '#f72585' : 
                                        percentage > 80 ? '#f8961e' : '#4cc9f0';
                    
                    return `
                        <div class="budget-item hover-lift">
                            <div class="budget-header">
                                <div class="budget-title">
                                    <div class="transaction-icon ${budget.category}" 
                                         style="width: 40px; height: 40px; background: ${budget.color || '#4361ee'}">
                                        <i class="${this.getCategoryIcon(budget.category)}"></i>
                                    </div>
                                    <div>
                                        <h4>${this.getCategoryName(budget.category)}</h4>
                                        <span class="text-muted">${budget.period || 'Monthly'} Budget</span>
                                    </div>
                                </div>
                                <div class="budget-amount">$${budget.limit.toFixed(2)}</div>
                            </div>
                            
                            <div class="budget-stats">
                                <span>Spent: $${budget.spent.toFixed(2)}</span>
                                <span>Remaining: $${(budget.limit - budget.spent).toFixed(2)}</span>
                            </div>
                            
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: ${Math.min(percentage, 100)}%; background: ${progressColor};"></div>
                            </div>
                            
                            <div class="progress-label" style="color: ${progressColor};">
                                ${percentage.toFixed(1)}% ${percentage > 100 ? '(Over Budget!)' : ''}
                            </div>
                            
                            <div class="budget-actions mt-3 d-flex gap-2">
                                <button class="btn-secondary" style="flex: 1;" 
                                        onclick="editBudget(${budget.id})">
                                    <i class="fas fa-edit"></i> Edit
                                </button>
                                <button class="btn-secondary" style="flex: 1;" 
                                        onclick="deleteBudget(${budget.id})">
                                    <i class="fas fa-trash"></i> Delete
                                </button>
                            </div>
                        </div>
                    `;
                }).join('');
                
                // Update overview section
                const overviewContainer = document.getElementById('budgets-overview');
                if (overviewContainer) {
                    const topBudgets = this.budgets.slice(0, 3);
                    overviewContainer.innerHTML = topBudgets.map(budget => {
                        const percentage = (budget.spent / budget.limit) * 100;
                        return `
                            <div class="budget-item">
                                <div class="budget-header">
                                    <h4>${this.getCategoryName(budget.category)}</h4>
                                    <span>${percentage.toFixed(1)}%</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: ${Math.min(percentage, 100)}%"></div>
                                </div>
                                <div class="budget-stats">
                                    <span>$${budget.spent.toFixed(2)} / $${budget.limit.toFixed(2)}</span>
                                </div>
                            </div>
                        `;
                    }).join('');
                }
            }

            updateGoals() {
                const container = document.getElementById('goals-container');
                if (!container) return;
                
                container.innerHTML = this.goals.map(goal => {
                    const progress = (goal.saved / goal.target) * 100;
                    const daysLeft = Math.ceil((new Date(goal.deadline) - new Date()) / (1000 * 60 * 60 * 24));
                    const circumference = 2 * Math.PI * 35;
                    const offset = circumference - (progress / 100) * circumference;
                    
                    return `
                        <div class="goal-card hover-lift">
                            <div class="goal-header">
                                <div class="goal-title">
                                    <i class="${goal.icon || 'fas fa-bullseye'}" 
                                       style="color: ${goal.color || '#4361ee'}; font-size: 24px; margin-right: 10px;"></i>
                                    <div>
                                        <h4>${goal.name}</h4>
                                        <span class="text-muted">Target: $${goal.target.toFixed(2)}</span>
                                    </div>
                                </div>
                                
                                <div class="goal-progress-circle">
                                    <svg width="80" height="80">
                                        <circle class="circle-bg" cx="40" cy="40" r="35"></circle>
                                        <circle class="circle" cx="40" cy="40" r="35" 
                                                stroke="${goal.color || '#4361ee'}"
                                                stroke-dasharray="${circumference}"
                                                stroke-dashoffset="${offset}"></circle>
                                    </svg>
                                    <div class="goal-progress-percent">${progress.toFixed(0)}%</div>
                                </div>
                            </div>
                            
                            <div class="goal-details">
                                <div class="goal-stats">
                                    <div class="goal-stat">
                                        <div class="label">Saved</div>
                                        <div class="value">$${goal.saved.toFixed(2)}</div>
                                    </div>
                                    <div class="goal-stat">
                                        <div class="label">Remaining</div>
                                        <div class="value">$${(goal.target - goal.saved).toFixed(2)}</div>
                                    </div>
                                    <div class="goal-stat">
                                        <div class="label">Deadline</div>
                                        <div class="value">${new Date(goal.deadline).toLocaleDateString()}</div>
                                    </div>
                                    <div class="goal-stat">
                                        <div class="label">Days Left</div>
                                        <div class="value" style="color: ${daysLeft < 0 ? '#f72585' : '#2ecc71'}">
                                            ${daysLeft < 0 ? 'Overdue' : daysLeft}
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="goal-actions">
                                    <input type="number" id="add-${goal.id}" 
                                           placeholder="Amount to add" 
                                           step="0.01" min="0" 
                                           style="flex: 1;">
                                    <button onclick="addToGoal(${goal.id})" 
                                            style="background: ${goal.color || '#4361ee'}">
                                        <i class="fas fa-plus"></i> Add
                                    </button>
                                </div>
                            </div>
                        </div>
                    `;
                }).join('');
                
                // Update overview section
                const overviewContainer = document.getElementById('goals-overview');
                if (overviewContainer) {
                    const topGoals = this.goals.slice(0, 2);
                    overviewContainer.innerHTML = topGoals.map(goal => {
                        const progress = (goal.saved / goal.target) * 100;
                        return `
                            <div class="goal-card">
                                <div class="goal-header">
                                    <h4>${goal.name}</h4>
                                    <div class="goal-progress">${progress.toFixed(1)}%</div>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: ${Math.min(progress, 100)}%"></div>
                                </div>
                                <div class="d-flex justify-between mt-3">
                                    <span>$${goal.saved.toFixed(2)} / $${goal.target.toFixed(2)}</span>
                                    <button class="btn-primary" onclick="addToGoal(${goal.id})">
                                        <i class="fas fa-plus"></i> Add
                                    </button>
                                </div>
                            </div>
                        `;
                    }).join('');
                }
            }

            updateCharts() {
                // Update category chart
                const expensesByCategory = this.getExpensesByCategory();
                const categoryData = {
                    labels: Object.keys(expensesByCategory).map(this.getCategoryName),
                    datasets: [{
                        data: Object.values(expensesByCategory),
                        backgroundColor: ['#FF6384', '#36A2EB', '#FFCE56', '#4BC0C0', '#9966FF', '#FF6B6B', '#A29BFE', '#FF9F40'],
                        borderWidth: 2,
                        borderColor: '#ffffff'
                    }]
                };

                // Update monthly trend chart
                const monthlyData = this.getMonthlyTrend();
                const trendData = {
                    labels: monthlyData.labels,
                    datasets: [{
                        label: 'Income',
                        data: monthlyData.income,
                        borderColor: '#2ecc71',
                        backgroundColor: 'rgba(46, 204, 113, 0.1)',
                        fill: true,
                        tension: 0.4
                    }, {
                        label: 'Expenses',
                        data: monthlyData.expenses,
                        borderColor: '#f72585',
                        backgroundColor: 'rgba(247, 37, 133, 0.1)',
                        fill: true,
                        tension: 0.4
                    }]
                };

                // Create or update charts
                this.createChart('categoryChart', 'doughnut', categoryData);
                this.createChart('monthlyTrendChart', 'line', trendData);
                
                // Update chart legend
                this.updateChartLegend(expensesByCategory);
            }

            createChart(canvasId, type, data) {
                const ctx = document.getElementById(canvasId)?.getContext('2d');
                if (!ctx) return;

                // Destroy existing chart if it exists
                if (this.charts[canvasId]) {
                    this.charts[canvasId].destroy();
                }

                this.charts[canvasId] = new Chart(ctx, {
                    type: type,
                    data: data,
                    options: {
                        responsive: true,
                        maintainAspectRatio: true,
                        plugins: {
                            legend: {
                                position: 'bottom',
                                labels: {
                                    padding: 20,
                                    usePointStyle: true
                                }
                            },
                            tooltip: {
                                callbacks: {
                                    label: (context) => {
                                        const label = context.dataset.label || '';
                                        const value = context.raw || 0;
                                        const total = context.dataset.data.reduce((a, b) => a + b, 0);
                                        const percentage = Math.round((value / total) * 100);
                                        return `${label}: $${value.toFixed(2)} (${percentage}%)`;
                                    }
                                }
                            }
                        },
                        animation: {
                            duration: 1000,
                            easing: 'easeInOutQuart'
                        }
                    }
                });
            }

            updateChartLegend(expensesByCategory) {
                const legendContainer = document.getElementById('categoryLegend');
                if (!legendContainer) return;
                
                const colors = ['#FF6384', '#36A2EB', '#FFCE56', '#4BC0C0', '#9966FF', '#FF6B6B', '#A29BFE', '#FF9F40'];
                let index = 0;
                
                legendContainer.innerHTML = Object.entries(expensesByCategory)
                    .filter(([_, amount]) => amount > 0)
                    .map(([category, amount]) => {
                        const color = colors[index++ % colors.length];
                        return `
                            <div class="legend-item">
                                <div class="legend-color" style="background: ${color}"></div>
                                <span>${this.getCategoryName(category)}: $${amount.toFixed(2)}</span>
                            </div>
                        `;
                    }).join('');
            }

            updateSparklines() {
                // This is a simplified version - you would typically use a sparkline library
                // For now, we'll just update the placeholder
                const sparklines = ['balance-sparkline', 'income-sparkline', 'expenses-sparkline', 'savings-sparkline'];
                sparklines.forEach(id => {
                    const element = document.getElementById(id);
                    if (element) {
                        element.innerHTML = '<svg width="100" height="30"></svg>';
                    }
                });
            }

            updateStats() {
                // Update notification badges
                const unreadCount = this.getUnreadNotificationsCount();
                const badgeElement = document.querySelector('.notification-badge');
                if (badgeElement) {
                    badgeElement.textContent = unreadCount;
                    badgeElement.style.display = unreadCount > 0 ? 'flex' : 'none';
                }
                
                // Update nav badges
                document.getElementById('transactions-badge').textContent = this.transactions.length;
                document.getElementById('budgets-badge').textContent = this.budgets.length;
                document.getElementById('goals-badge').textContent = this.goals.length;
                document.getElementById('insights-badge').textContent = this.notifications.filter(n => !n.read).length;
            }

            updateNotificationBadges() {
                const unreadCount = this.getUnreadNotificationsCount();
                const badgeElement = document.querySelector('.notification-badge');
                if (badgeElement) {
                    badgeElement.textContent = unreadCount;
                    badgeElement.style.display = unreadCount > 0 ? 'flex' : 'none';
                }
                
                // Update notifications panel
                this.updateNotificationsPanel();
            }

            updateNotificationsPanel() {
                const container = document.getElementById('notificationsContent');
                if (!container) return;
                
                container.innerHTML = this.notifications.map(notification => `
                    <div class="notification-item ${!notification.read ? 'unread' : ''}" 
                         onclick="markNotificationAsRead(${notification.id})">
                        <div class="notification-icon ${notification.type}">
                            <i class="fas fa-${notification.type === 'success' ? 'check-circle' : 
                                            notification.type === 'warning' ? 'exclamation-triangle' : 
                                            notification.type === 'info' ? 'info-circle' : 'bell'}"></i>
                        </div>
                        <div class="notification-content">
                            <h4>${notification.title}</h4>
                            <p>${notification.message}</p>
                            <div class="notification-time">
                                ${this.formatTimeAgo(new Date(notification.timestamp))}
                            </div>
                        </div>
                    </div>
                `).join('');
            }

            // ===== HELPER METHODS =====
            getCategoryName(category) {
                const names = {
                    'food': 'Food & Dining',
                    'transport': 'Transportation',
                    'shopping': 'Shopping',
                    'bills': 'Bills & Utilities',
                    'entertainment': 'Entertainment',
                    'health': 'Health & Fitness',
                    'education': 'Education',
                    'other': 'Other',
                    'income': 'Income'
                };
                return names[category] || category;
            }

            getCategoryIcon(category) {
                const icons = {
                    'food': 'fas fa-utensils',
                    'transport': 'fas fa-car',
                    'shopping': 'fas fa-shopping-bag',
                    'bills': 'fas fa-file-invoice-dollar',
                    'entertainment': 'fas fa-film',
                    'health': 'fas fa-heartbeat',
                    'education': 'fas fa-graduation-cap',
                    'other': 'fas fa-ellipsis-h',
                    'income': 'fas fa-money-bill-wave'
                };
                return icons[category] || 'fas fa-question';
            }

            formatTimeAgo(date) {
                const seconds = Math.floor((new Date() - date) / 1000);
                
                let interval = Math.floor(seconds / 31536000);
                if (interval >= 1) return interval + ' year' + (interval > 1 ? 's' : '') + ' ago';
                
                interval = Math.floor(seconds / 2592000);
                if (interval >= 1) return interval + ' month' + (interval > 1 ? 's' : '') + ' ago';
                
                interval = Math.floor(seconds / 86400);
                if (interval >= 1) return interval + ' day' + (interval > 1 ? 's' : '') + ' ago';
                
                interval = Math.floor(seconds / 3600);
                if (interval >= 1) return interval + ' hour' + (interval > 1 ? 's' : '') + ' ago';
                
                interval = Math.floor(seconds / 60);
                if (interval >= 1) return interval + ' minute' + (interval > 1 ? 's' : '') + ' ago';
                
                return Math.floor(seconds) + ' seconds ago';
            }

            formatCurrency(amount) {
                return new Intl.NumberFormat('en-US', {
                    style: 'currency',
                    currency: 'USD'
                }).format(amount);
            }

            renderTransactions(transactions, containerId) {
                const container = document.getElementById(containerId);
                if (!container) return;

                if (transactions.length === 0) {
                    container.innerHTML = `
                        <div class="empty-state">
                            <div class="empty-state-icon">
                                <i class="fas fa-exchange-alt"></i>
                            </div>
                            <h3>No transactions found</h3>
                            <p>${containerId === 'recent-transactions' ? 
                                'Add your first transaction to get started!' : 
                                'No transactions match your current filters.'}</p>
                            ${containerId === 'recent-transactions' ? 
                                `<button class="btn-primary" onclick="showAddModal()">
                                    <i class="fas fa-plus"></i> Add Transaction
                                </button>` : ''}
                        </div>
                    `;
                    return;
                }

                container.innerHTML = transactions.map(transaction => `
                    <div class="transaction-item hover-lift">
                        <div class="transaction-info">
                            <div class="transaction-icon ${transaction.category}">
                                <i class="${this.getCategoryIcon(transaction.category)}"></i>
                            </div>
                            <div class="transaction-details">
                                <h4>${transaction.description}</h4>
                                <div class="transaction-meta">
                                    <span>${new Date(transaction.date).toLocaleDateString()}</span>
                                    <span></span>
                                    <span>${this.getCategoryName(transaction.category)}</span>
                                    ${transaction.account ? `
                                        <span></span>
                                        <span>${transaction.account}</span>
                                    ` : ''}
                                </div>
                                ${transaction.tags && transaction.tags.length > 0 ? `
                                    <div class="transaction-tags">
                                        ${transaction.tags.map(tag => `
                                            <span class="transaction-tag ${tag}">${tag}</span>
                                        `).join('')}
                                    </div>
                                ` : ''}
                                ${transaction.notes ? `
                                    <div class="text-muted mt-1" style="font-size: 12px;">
                                        <i class="fas fa-sticky-note"></i> ${transaction.notes}
                                    </div>
                                ` : ''}
                            </div>
                        </div>
                        <div class="transaction-amount ${transaction.type}-amount">
                            ${transaction.type === 'income' ? '+' : '-'}${this.formatCurrency(transaction.amount)}
                        </div>
                        ${containerId === 'all-transactions' ? `
                            <div class="transaction-actions">
                                <button class="edit-btn" onclick="editTransaction(${transaction.id})" 
                                        title="Edit transaction">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="delete-btn" onclick="deleteTransaction(${transaction.id})" 
                                        title="Delete transaction">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        ` : ''}
                    </div>
                `).join('');
            }

            generateReport(type = 'monthly', month = null, year = null) {
                let reportHTML = '';
                
                switch(type) {
                    case 'monthly':
                        const monthlyIncome = this.getTotalIncome();
                        const monthlyExpenses = this.getTotalExpenses();
                        const monthlySavings = monthlyIncome - monthlyExpenses;
                        const savingsRate = monthlyIncome > 0 ? (monthlySavings / monthlyIncome) * 100 : 0;
                        
                        reportHTML = `
                            <div class="report-card hover-lift">
                                <div class="report-header">
                                    <div class="report-icon">
                                        <i class="fas fa-calendar-alt"></i>
                                    </div>
                                    <div class="report-title">Monthly Financial Report</div>
                                </div>
                                <div class="report-content">
                                    <div class="report-metric">
                                        <div class="label">Total Income</div>
                                        <div class="value" style="color: #2ecc71">${this.formatCurrency(monthlyIncome)}</div>
                                    </div>
                                    <div class="report-metric">
                                        <div class="label">Total Expenses</div>
                                        <div class="value" style="color: #f72585">${this.formatCurrency(monthlyExpenses)}</div>
                                    </div>
                                    <div class="report-metric">
                                        <div class="label">Net Savings</div>
                                        <div class="value" style="color: #4cc9f0">${this.formatCurrency(monthlySavings)}</div>
                                    </div>
                                    <div class="report-metric">
                                        <div class="label">Savings Rate</div>
                                        <div class="value" style="color: ${savingsRate >= 20 ? '#2ecc71' : '#f8961e'}">
                                            ${savingsRate.toFixed(1)}%
                                        </div>
                                    </div>
                                </div>
                                <div class="report-chart">
                                    <canvas id="monthlyReportChart"></canvas>
                                </div>
                            </div>
                        `;
                        break;
                        
                    case 'yearly':
                        reportHTML = `
                            <div class="report-card hover-lift">
                                <div class="report-header">
                                    <div class="report-icon" style="background: linear-gradient(135deg, #f8961e, #f3722c);">
                                        <i class="fas fa-chart-line"></i>
                                    </div>
                                    <div class="report-title">Yearly Financial Report</div>
                                </div>
                                <div class="report-content">
                                    <p>Annual report for ${year || '2024'}</p>
                                    <div class="report-chart">
                                        <canvas id="yearlyReportChart"></canvas>
                                    </div>
                                </div>
                            </div>
                        `;
                        break;
                        
                    case 'category':
                        const expenses = this.getExpensesByCategory();
                        reportHTML = `
                            <div class="report-card hover-lift">
                                <div class="report-header">
                                    <div class="report-icon" style="background: linear-gradient(135deg, #f72585, #b5179e);">
                                        <i class="fas fa-chart-pie"></i>
                                    </div>
                                    <div class="report-title">Category Analysis</div>
                                </div>
                                <div class="report-content">
                                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px;">
                                        ${Object.entries(expenses)
                                            .filter(([_, amount]) => amount > 0)
                                            .sort((a, b) => b[1] - a[1])
                                            .map(([cat, amount]) => `
                                                <div class="stat-card">
                                                    <div class="stat-card-title">${this.getCategoryName(cat)}</div>
                                                    <div class="stat-card-value">${this.formatCurrency(amount)}</div>
                                                    <div class="stat-card-change">
                                                        ${((amount / this.getTotalExpenses()) * 100).toFixed(1)}% of total
                                                    </div>
                                                </div>
                                            `).join('')}
                                    </div>
                                </div>
                            </div>
                        `;
                        break;
                }
                
                const container = document.getElementById('report-content');
                if (container) {
                    container.innerHTML = reportHTML;
                    
                    // Initialize charts after content is loaded
                    setTimeout(() => {
                        if (type === 'monthly') {
                            this.createMonthlyReportChart();
                        }
                    }, 100);
                }
            }

            createMonthlyReportChart() {
                const expensesByCategory = this.getExpensesByCategory();
                const ctx = document.getElementById('monthlyReportChart')?.getContext('2d');
                if (!ctx) return;

                new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: Object.keys(expensesByCategory).map(this.getCategoryName),
                        datasets: [{
                            label: 'Expenses by Category',
                            data: Object.values(expensesByCategory),
                            backgroundColor: ['#FF6384', '#36A2EB', '#FFCE56', '#4BC0C0', '#9966FF', '#FF6B6B', '#A29BFE', '#FF9F40'],
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        plugins: {
                            legend: {
                                display: false
                            }
                        }
                    }
                });
            }

            // ===== TOAST NOTIFICATIONS =====
            showToast(message, type = 'info', duration = 5000) {
                const toastContainer = document.getElementById('toastContainer');
                if (!toastContainer) return;

                const toastId = 'toast-' + Date.now();
                const toast = document.createElement('div');
                toast.className = `toast toast-${type} fade-in`;
                toast.id = toastId;
                
                const icons = {
                    'success': 'fas fa-check-circle',
                    'error': 'fas fa-exclamation-circle',
                    'warning': 'fas fa-exclamation-triangle',
                    'info': 'fas fa-info-circle'
                };
                
                toast.innerHTML = `
                    <div class="toast-icon">
                        <i class="${icons[type] || 'fas fa-info-circle'}"></i>
                    </div>
                    <div class="toast-content">
                        <p>${message}</p>
                    </div>
                    <button class="close-toast" onclick="removeToast('${toastId}')">
                        <i class="fas fa-times"></i>
                    </button>
                `;

                toastContainer.appendChild(toast);

                // Auto-remove after duration
                setTimeout(() => {
                    removeToast(toastId);
                }, duration);
            }

            // ===== ACHIEVEMENT POPUP =====
            showAchievementPopup(title, description) {
                const popup = document.getElementById('achievementPopup');
                if (!popup) return;

                document.getElementById('achievementTitle').textContent = title;
                document.getElementById('achievementDescription').textContent = description;
                popup.style.display = 'block';

                // Auto-hide after 5 seconds
                setTimeout(() => {
                    popup.style.display = 'none';
                }, 5000);
            }

            // ===== EXPORT METHODS =====
            exportTransactions() {
                const transactions = this.transactions;
                const csv = this.convertToCSV(transactions);
                this.downloadCSV(csv, 'transactions.csv');
                this.showToast('Transactions exported successfully!', 'success');
            }

            exportBudgets() {
                const csv = this.convertToCSV(this.budgets);
                this.downloadCSV(csv, 'budgets.csv');
                this.showToast('Budgets exported successfully!', 'success');
            }

            exportGoals() {
                const csv = this.convertToCSV(this.goals);
                this.downloadCSV(csv, 'goals.csv');
                this.showToast('Goals exported successfully!', 'success');
            }

            convertToCSV(data) {
                if (data.length === 0) return '';
                
                const headers = Object.keys(data[0]);
                const rows = data.map(obj => 
                    headers.map(header => {
                        const value = obj[header];
                        if (typeof value === 'object') return JSON.stringify(value);
                        return String(value);
                    }).join(',')
                );
                
                return [headers.join(','), ...rows].join('\n');
            }

            downloadCSV(csv, filename) {
                const blob = new Blob([csv], { type: 'text/csv' });
                const url = window.URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = filename;
                a.click();
                window.URL.revokeObjectURL(url);
            }
        }

        // ===== GLOBAL INSTANCE =====
        const tracker = new EnhancedFinanceTracker();

        // ===== DOM LOADED =====
        document.addEventListener('DOMContentLoaded', () => {
            // Set today's date in forms
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('date').value = today;
            document.getElementById('endDate').value = today;
            
            // Set default start date to first day of current month
            const firstDay = new Date(new Date().getFullYear(), new Date().getMonth(), 1)
                .toISOString().split('T')[0];
            document.getElementById('startDate').value = firstDay;
            
            // Initialize UI
            tracker.updateUI();
            
            // Set active category
            selectCategory('food');
            
            // Initialize notifications panel
            tracker.updateNotificationsPanel();
            
            // Check if first time user
            const isFirstTime = !localStorage.getItem('hasVisitedBefore');
            if (isFirstTime) {
                localStorage.setItem('hasVisitedBefore', 'true');
                setTimeout(() => {
                    startTour();
                }, 1000);
            }
            
            // Initialize chatbot with some tips
            initializeChatbot();
        });

        // ===== UI FUNCTIONS =====
        function showSection(sectionId) {
            // Hide all sections
            document.querySelectorAll('.section').forEach(section => {
                section.style.display = 'none';
            });
            
            // Remove active class from all nav links
            document.querySelectorAll('.nav-links a').forEach(link => {
                link.classList.remove('active');
            });
            
            // Show selected section
            const section = document.getElementById(sectionId);
            if (section) {
                section.style.display = 'block';
                section.classList.add('fade-in');
            }
            
            // Update active nav link
            const navLink = document.querySelector(`.nav-links a[onclick*="${sectionId}"]`);
            if (navLink) navLink.classList.add('active');
            
            // Update page title
            const titles = {
                'dashboard': 'Dashboard',
                'transactions': 'Transactions',
                'budgets': 'Budget Management',
                'reports': 'Financial Reports',
                'goals': 'Savings Goals',
                'investments': 'Investments',
                'recurring': 'Recurring Transactions',
                'insights': 'Financial Insights',
                'analytics': 'Advanced Analytics',
                'settings': 'Settings',
                'help': 'Help & Support'
            };
            
            const pageTitle = document.getElementById('page-title');
            if (pageTitle) {
                pageTitle.innerHTML = `<i class="fas fa-home"></i> ${titles[sectionId] || 'Dashboard'}`;
            }
            
            // Update specific section data
            if (sectionId === 'reports') {
                tracker.generateReport();
            } else if (sectionId === 'transactions') {
                tracker.currentPage = 1;
                tracker.updateTransactions();
            }
            
            // Close mobile menu if open
            if (window.innerWidth <= 992) {
                document.querySelector('.sidebar').classList.remove('active');
                document.querySelector('.mobile-menu-toggle').style.display = 'flex';
            }
        }

        function toggleTheme() {
            document.body.classList.toggle('dark-mode');
            const isDark = document.body.classList.contains('dark-mode');
            const icon = document.querySelector('.theme-toggle i');
            const text = document.querySelector('.theme-toggle span');
            
            if (isDark) {
                icon.className = 'fas fa-sun';
                text.textContent = 'Light';
                tracker.settings.theme = 'dark';
            } else {
                icon.className = 'fas fa-moon';
                text.textContent = 'Dark';
                tracker.settings.theme = 'light';
            }
            
            tracker.saveAll();
            tracker.showToast(`Switched to ${isDark ? 'dark' : 'light'} mode`, 'success');
        }

        function toggleSidebar() {
            document.querySelector('.sidebar').classList.toggle('collapsed');
            const icon = document.querySelector('.sidebar-toggle i');
            if (document.querySelector('.sidebar').classList.contains('collapsed')) {
                icon.className = 'fas fa-chevron-right';
            } else {
                icon.className = 'fas fa-chevron-left';
            }
        }

        function toggleMobileMenu() {
            const sidebar = document.querySelector('.sidebar');
            sidebar.classList.toggle('active');
            document.querySelector('.mobile-menu-toggle').style.display = 
                sidebar.classList.contains('active') ? 'none' : 'flex';
        }

        function showAddModal() {
            document.getElementById('addModal').style.display = 'flex';
            document.getElementById('date').valueAsDate = new Date();
            selectCategory('food');
            
            // Hide recurring options by default
            document.getElementById('recurring-options').style.display = 'none';
            document.getElementById('account-group').style.display = 'none';
        }

        function closeModal() {
            document.getElementById('addModal').style.display = 'none';
            document.getElementById('transactionForm').reset();
        }

        function toggleTransactionType() {
            const type = document.querySelector('input[name="type"]:checked').value;
            const categoryGroup = document.getElementById('category-group');
            const accountGroup = document.getElementById('account-group');
            
            if (type === 'transfer') {
                categoryGroup.style.display = 'none';
                accountGroup.style.display = 'block';
            } else {
                categoryGroup.style.display = 'block';
                accountGroup.style.display = 'none';
            }
        }

        function selectCategory(category) {
            tracker.selectedCategory = category;
            document.querySelectorAll('.category-option').forEach(opt => {
                opt.classList.remove('active');
            });
            document.querySelector(`[data-category="${category}"]`).classList.add('active');
            document.getElementById('category').value = category;
        }

        function addTransaction(event) {
            event.preventDefault();
            showLoading();
            
            setTimeout(() => {
                const form = event.target;
                const transaction = {
                    type: form.type.value,
                    description: form.description.value,
                    amount: parseFloat(form.amount.value),
                    category: form.category.value,
                    date: form.date.value,
                    account: form.account?.value || 'checking',
                    notes: form.notes.value,
                    tags: []
                };
                
                // Add tags based on category and amount
                if (transaction.type === 'expense') {
                    if (transaction.category === 'food') transaction.tags.push('essential');
                    if (transaction.category === 'bills') transaction.tags.push('recurring');
                    if (transaction.amount > 100) transaction.tags.push('large');
                }
                
                tracker.addTransaction(transaction);
                form.reset();
                closeModal();
                hideLoading();
                showSection('dashboard');
            }, 1000);
        }

        function editTransaction(id) {
            const transaction = tracker.transactions.find(t => t.id === id);
            if (!transaction) return;
            
            showAddModal();
            
            // Fill form with transaction data
            document.querySelector(`input[name="type"][value="${transaction.type}"]`).checked = true;
            document.getElementById('description').value = transaction.description;
            document.getElementById('amount').value = transaction.amount;
            document.getElementById('date').value = transaction.date;
            selectCategory(transaction.category);
            document.getElementById('notes').value = transaction.notes || '';
            
            // Change form submit to update instead of add
            const form = document.getElementById('transactionForm');
            form.onsubmit = function(e) {
                e.preventDefault();
                const updates = {
                    type: form.type.value,
                    description: form.description.value,
                    amount: parseFloat(form.amount.value),
                    category: form.category.value,
                    date: form.date.value,
                    notes: form.notes.value
                };
                
                tracker.updateTransaction(id, updates);
                closeModal();
                showSection('transactions');
            };
            
            // Change button text
            const submitBtn = form.querySelector('.btn-primary');
            submitBtn.innerHTML = '<i class="fas fa-save"></i> Update Transaction';
        }

        function deleteTransaction(id) {
            if (confirm('Are you sure you want to delete this transaction?')) {
                tracker.deleteTransaction(id);
            }
        }

        function filterTransactions(type) {
            tracker.currentFilter = type;
            tracker.currentPage = 1;
            
            // Update active filter button
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            tracker.updateTransactions();
        }

        function filterByCategory(category) {
            tracker.currentPage = 1;
            const result = tracker.getTransactions(tracker.currentFilter, category, 1);
            tracker.renderTransactions(result.transactions, 'all-transactions');
        }

        function filterByDate() {
            tracker.currentPage = 1;
            tracker.updateTransactions();
        }

        function searchContent(query) {
            tracker.currentPage = 1;
            tracker.updateTransactions();
        }

        function loadMoreTransactions() {
            tracker.currentPage++;
            const result = tracker.getTransactions(tracker.currentFilter, 'all', tracker.currentPage);
            const currentTransactions = document.getElementById('all-transactions');
            
            result.transactions.forEach(transaction => {
                const div = document.createElement('div');
                div.className = 'transaction-item fade-in';
                div.innerHTML = `
                    <div class="transaction-info">
                        <div class="transaction-icon ${transaction.category}">
                            <i class="${tracker.getCategoryIcon(transaction.category)}"></i>
                        </div>
                        <div class="transaction-details">
                            <h4>${transaction.description}</h4>
                            <div class="transaction-meta">
                                <span>${new Date(transaction.date).toLocaleDateString()}</span>
                                <span></span>
                                <span>${tracker.getCategoryName(transaction.category)}</span>
                            </div>
                        </div>
                    </div>
                    <div class="transaction-amount ${transaction.type}-amount">
                        ${transaction.type === 'income' ? '+' : '-'}$${transaction.amount.toFixed(2)}
                    </div>
                    <div class="transaction-actions">
                        <button class="edit-btn" onclick="editTransaction(${transaction.id})">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="delete-btn" onclick="deleteTransaction(${transaction.id})">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                `;
                currentTransactions.appendChild(div);
            });
            
            // Hide load more button if no more transactions
            if (!result.hasMore) {
                event.target.style.display = 'none';
            }
        }

        function addBudgetModal() {
            const category = prompt('Enter budget category:', 'food');
            const limit = parseFloat(prompt('Enter budget limit:', '500'));
            const period = prompt('Enter budget period (monthly/weekly):', 'monthly');
            const color = prompt('Enter color (hex code):', '#FF6384');
            
            if (category && !isNaN(limit) && limit > 0) {
                tracker.addBudget({
                    category: category.toLowerCase(),
                    limit: limit,
                    period: period || 'monthly',
                    color: color || '#FF6384'
                });
            }
        }

        function editBudget(id) {
            const budget = tracker.budgets.find(b => b.id === id);
            if (!budget) return;
            
            const newLimit = parseFloat(prompt('Enter new budget limit:', budget.limit));
            if (!isNaN(newLimit) && newLimit > 0) {
                tracker.updateBudgetItem(id, { limit: newLimit });
            }
        }

        function deleteBudget(id) {
            if (confirm('Are you sure you want to delete this budget?')) {
                tracker.deleteBudget(id);
            }
        }

        function addGoalModal() {
            const name = prompt('Enter goal name:', 'New Car');
            const target = parseFloat(prompt('Enter target amount:', '10000'));
            const saved = parseFloat(prompt('Enter amount already saved:', '0'));
            const deadline = prompt('Enter deadline (YYYY-MM-DD):', '2024-12-31');
            const color = prompt('Enter color (hex code):', '#4361ee');
            
            if (name && !isNaN(target) && target > 0) {
                tracker.addGoal({
                    name: name,
                    target: target,
                    saved: saved || 0,
                    deadline: deadline,
                    color: color || '#4361ee',
                    icon: 'fas fa-bullseye'
                });
            }
        }

        function addToGoal(goalId) {
            const input = document.getElementById(`add-${goalId}`);
            const amount = parseFloat(input.value);
            
            if (!isNaN(amount) && amount > 0) {
                tracker.updateGoal(goalId, amount);
                input.value = '';
            } else {
                tracker.showToast('Please enter a valid amount', 'error');
            }
        }

        function deleteGoal(id) {
            if (confirm('Are you sure you want to delete this goal?')) {
                tracker.deleteGoal(id);
            }
        }

        function generateReport() {
            const type = document.getElementById('report-type').value;
            const month = document.getElementById('report-month').value;
            const year = document.getElementById('report-year').value;
            
            tracker.generateReport(type, month, year);
        }

        function exportReport() {
            tracker.showToast('PDF export feature coming soon!', 'info');
        }

        function updateTrendChart() {
            tracker.updateCharts();
            tracker.showToast('Chart updated!', 'success');
        }

        function changeVizType(type) {
            // Update active button
            document.querySelectorAll('.viz-control').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Change chart type
            const chart = tracker.charts['trendVizChart'];
            if (chart) {
                chart.config.type = type;
                chart.update();
            }
        }

        function toggleNotifications() {
            const panel = document.getElementById('notificationsPanel');
            panel.style.display = panel.style.display === 'block' ? 'none' : 'block';
            
            // Mark all as read when opening
            if (panel.style.display === 'block') {
                tracker.markAllNotificationsAsRead();
            }
        }

        function markNotificationAsRead(id) {
            tracker.markNotificationAsRead(id);
        }

        function toggleChatbot() {
            const chatbot = document.getElementById('chatbotContainer');
            chatbot.style.display = chatbot.style.display === 'block' ? 'none' : 'block';
        }

        function sendChatbotMessage(event) {
            event.preventDefault();
            const input = document.getElementById('chatbotInput');
            const message = input.value.trim();
            
            if (!message) return;
            
            // Add user message
            addChatbotMessage(message, 'user');
            input.value = '';
            
            // Generate bot response
            setTimeout(() => {
                const response = generateChatbotResponse(message);
                addChatbotMessage(response, 'bot');
            }, 500);
        }

        function addChatbotMessage(content, sender) {
            const messagesContainer = document.getElementById('chatbotMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${sender} fade-in`;
            messageDiv.innerHTML = `
                <div class="message-content">${content}</div>
            `;
            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function generateChatbotResponse(message) {
            const lowerMessage = message.toLowerCase();
            
            if (lowerMessage.includes('hello') || lowerMessage.includes('hi')) {
                return "Hello! I'm your finance assistant. How can I help you today?";
            } else if (lowerMessage.includes('budget')) {
                return "I can help you manage your budgets. You can view them in the Budgets section and set alerts for when you're approaching limits.";
            } else if (lowerMessage.includes('save') || lowerMessage.includes('goal')) {
                return "Setting savings goals is a great way to stay motivated! Check out the Goals section to create and track your financial objectives.";
            } else if (lowerMessage.includes('expense') || lowerMessage.includes('spend')) {
                return "You can track all your expenses in the Transactions section. Try categorizing them to get better insights into your spending habits.";
            } else if (lowerMessage.includes('report')) {
                return "Financial reports are available in the Reports section. You can generate monthly, yearly, and category-specific reports.";
            } else if (lowerMessage.includes('tip') || lowerMessage.includes('advice')) {
                const tips = [
                    "Try the 50/30/20 rule: 50% for needs, 30% for wants, 20% for savings.",
                    "Review your spending weekly to stay on track with your budget.",
                    "Automate your savings to ensure consistency.",
                    "Set specific, measurable financial goals with deadlines.",
                    "Use cash for discretionary spending to avoid overspending."
                ];
                return tips[Math.floor(Math.random() * tips.length)];
            } else {
                return "I'm here to help with your finances! You can ask me about budgets, goals, expenses, reports, or general financial tips.";
            }
        }

        function initializeChatbot() {
            setTimeout(() => {
                addChatbotMessage(" Pro Tip: Try setting up budgets for different categories to track your spending better!", 'bot');
            }, 2000);
        }

        function showLoading() {
            document.getElementById('loadingOverlay').style.display = 'flex';
        }

        function hideLoading() {
            document.getElementById('loadingOverlay').style.display = 'none';
        }

        function removeToast(toastId) {
            const toast = document.getElementById(toastId);
            if (toast) {
                toast.classList.add('fade-out');
                setTimeout(() => toast.remove(), 300);
            }
        }

        function closeAchievementPopup() {
            document.getElementById('achievementPopup').style.display = 'none';
        }

        function startTour() {
            document.getElementById('tourOverlay').style.display = 'block';
            document.getElementById('tourStep1').style.display = 'block';
        }

        function nextTourStep() {
            // For simplicity, we'll just end the tour
            skipTour();
        }

        function skipTour() {
            document.getElementById('tourOverlay').style.display = 'none';
            document.querySelectorAll('.tour-step').forEach(step => {
                step.style.display = 'none';
            });
        }

        function showUserMenu() {
            tracker.showToast('User menu coming soon!', 'info');
        }

        // Close modals when clicking outside
        window.onclick = function(event) {
            const modal = document.getElementById('addModal');
            if (event.target === modal) {
                closeModal();
            }
            
            const notificationsPanel = document.getElementById('notificationsPanel');
            if (!event.target.closest('.notification-btn') && 
                !event.target.closest('.notifications-panel') &&
                notificationsPanel.style.display === 'block') {
                notificationsPanel.style.display = 'none';
            }
        }

        // Keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            // Ctrl/Cmd + N: New transaction
            if ((e.ctrlKey || e.metaKey) && e.key === 'n') {
                e.preventDefault();
                showAddModal();
            }
            
            // Ctrl/Cmd + /: Search
            if ((e.ctrlKey || e.metaKey) && e.key === '/') {
                e.preventDefault();
                document.getElementById('searchInput').focus();
            }
            
            // Ctrl/Cmd + D: Dashboard
            if ((e.ctrlKey || e.metaKey) && e.key === 'd') {
                e.preventDefault();
                showSection('dashboard');
            }
            
            // Ctrl/Cmd + T: Transactions
            if ((e.ctrlKey || e.metaKey) && e.key === 't') {
                e.preventDefault();
                showSection('transactions');
            }
            
            // Escape: Close modals
            if (e.key === 'Escape') {
                closeModal();
                document.getElementById('notificationsPanel').style.display = 'none';
                document.getElementById('chatbotContainer').style.display = 'none';
            }
        });

        // Responsive sidebar handling
        window.addEventListener('resize', function() {
            if (window.innerWidth <= 992) {
                document.querySelector('.sidebar').classList.remove('active');
                document.querySelector('.mobile-menu-toggle').style.display = 'flex';
            } else {
                document.querySelector('.mobile-menu-toggle').style.display = 'none';
                document.querySelector('.sidebar').classList.add('active');
            }
        });

        // Initialize responsive behavior
        if (window.innerWidth <= 992) {
            document.querySelector('.sidebar').classList.remove('active');
            document.querySelector('.mobile-menu-toggle').style.display = 'flex';
        }

        // CSS for fade-out animation
        const style = document.createElement('style');
        style.textContent = `
            .fade-out {
                animation: fadeOut 0.3s ease;
            }
            
            @keyframes fadeOut {
                from { opacity: 1; transform: translateX(0); }
                to { opacity: 0; transform: translateX(100%); }
            }
            
            .grid-2-col {
                display: grid;
                grid-template-columns: 2fr 1fr;
                gap: 30px;
            }
            
            @media (max-width: 992px) {
                .grid-2-col {
                    grid-template-columns: 1fr;
                }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>
